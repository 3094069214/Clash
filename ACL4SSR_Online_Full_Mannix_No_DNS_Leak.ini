# é’ˆå¯¹ä¸­å›½å¤§é™†ç”µä¿¡èœ‚çªæ•°æ®ç½‘ç»œçš„Mihomoè®¢é˜…è½¬æ¢ä¼˜åŒ–é…ç½®
[custom]

# åŸºç¡€è®¾ç½®
exclude_remarks=(Data Left|Remain:|Traffic:|Expir[ey]|Reset|(\d[\d.]*\s*[MG]B[^\dA-Za-z]+|[:ï¼š]\s*)\d[\d.]*\s*GB(?![\dA-Za-z])|å‰©[ä½™é¤˜]æµé‡|æµé‡ï¼š|[åˆ°è¿‡éæ•ˆ]æœŸ|[æ—¶æ™‚][é—´é–“]|é‡ç½®|åˆ†å‰²çº¿|æ®‹ã‚Šä½¿ç”¨å®¹é‡|æœ‰åŠ¹æœŸé™|ãƒªã‚»ãƒƒãƒˆ|ğŸ”° (ID|HSD|SNI):|ğŸ“ GÃ³i:)

# Emoji
add_emoji=true
remove_old_emoji=true
emoji=(?!ğŸ‡¨ğŸ‡³)[ğŸ‡¦-ğŸ‡¿]{2},
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ç¾å›½|åç››é¡¿|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ—§é‡‘å±±|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|çº½çº¦|ä¸¹ä½›|åŠ åˆ©ç¦å°¼äºš|å¼—å‰å°¼äºš|å¾—å…‹è¨æ–¯|äºšç‰¹å…°å¤§|ä½›ç½—é‡Œè¾¾|è¿ˆé˜¿å¯†|US|USA|United States|Washington|Portland|Dallas|Oregon|Phoenix|Fremont|Silicon Valley|San Francisco|Las Vegas|Los Angeles|San Jose|Santa Clara|Seattle|Chicago|New York|Denver|California|Virginia|Texas|Atlanta|Florida|Miami),ğŸ‡ºğŸ‡¸
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(é¦™æ¸¯|HK|Hong Kong),ğŸ‡­ğŸ‡°
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|åå¤å±‹|åŸ¼ç‰|ç¦å†ˆ|JP|Japan|Tokyo|Osaka|Nagoya|Saitama|Fukuoka),ğŸ‡¯ğŸ‡µ
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ–°åŠ å¡|ç‹®åŸ|SG|Singapore),ğŸ‡¸ğŸ‡¬
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å°æ¹¾|å°åŒ—|æ–°åŒ—|å½°åŒ–|é«˜é›„|TW|Taiwan|Taipei|New Taipei|Changhua|Kaohsiung),ğŸ‡¹ğŸ‡¼
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(è‹±å›½|è‹±æ ¼å…°|ä¼¦æ•¦|æ›¼å½»æ–¯ç‰¹|UK|United Kingdom|England|London|Manchester),ğŸ‡¬ğŸ‡§
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(åŠ æ‹¿å¤§|å¤šä¼¦å¤š|è’™ç‰¹åˆ©å°”|æ¸©å“¥å|CA|Canada|Toronto|Montreal|Vancouver),ğŸ‡¨ğŸ‡¦
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å¾·å›½|æ³•å…°å…‹ç¦|æŸæ—|DE|Germany|Frankfurt|Berlin),ğŸ‡©ğŸ‡ª
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ³•å›½|å·´é»|FR|France|Paris),ğŸ‡«ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(éŸ©å›½|é¦–å°”|KR|Korea|South Korea|Seoul),ğŸ‡°ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ¾³å¤§åˆ©äºš|æ‚‰å°¼|å¢¨å°”æœ¬|AU|Australia|Sydney|Melbourne),ğŸ‡¦ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¿„ç½—æ–¯|è«æ–¯ç§‘|åœ£å½¼å¾—å ¡|RU|Russia|Moscow|Saint Petersburg),ğŸ‡·ğŸ‡º
emoji=^(?!.*([ğŸ‡¦-ğŸ‡¿]{2}|â„¹ï¸)).*(å®˜.?ç½‘|å®˜æ–¹|äº§å“|å¹³å°|å‹¿è¿|ä¿®å¤|æ¢å¤|æ›´æ–°|åœ°å€|ç½‘ç«™|ç½‘å€|åŸŸå|ç½‘åŸŸ|æµè§ˆå™¨|å¯¼èˆª|æœ|ç¾¤|è£™|èŠ|é¢‘é“|ç”µæŠ¥|é£æœº|æ‰£|å¾®ä¿¡|å”®å|å®¢æœ|å·¥å•|è”ç³»|ä½¿ç”¨|è´­ä¹°|ç»­è´¹|è®¢é˜…|å…¬å‘Š|ç‰ˆæœ¬|å‡ºç°|æ²¡ç½‘|æƒ…å†µ|å¼€é€š|æ•°é‡|æ³¨|è¯´æ˜|é€šçŸ¥|å»é™¤|è¿‡æ»¤|@|ï¼š|(?i:(?<![\da-z])(tg|telegram|t\.me|qq?|vx?|wx)(?!\d*[a-z]|\d{1,3}(?!\d))|^[^:]+:(?![\da-f]{0,4}:|\s*\d{1,5}([/?]|\s*$)))),â„¹ï¸

enable_rule_generator=true
overwrite_original_rules=true

# ä»£ç†åˆ†ç»„ - ä¼˜åŒ–åˆ†ç»„é¡ºåºå’Œé€‰æ‹©
custom_proxy_group=ğŸš€ å…¨å±€ä»£ç†`select`[]âš¡ æœ€ä½å»¶è¿Ÿ`[]ğŸ‡­ğŸ‡° é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ ç¾å›½`[]ğŸ‡¹ğŸ‡¼ å°æ¹¾`[]ğŸŒ å…¶ä»–`[]ğŸ” æ‰‹åŠ¨é€‰æ‹©`[]DIRECT
custom_proxy_group=ğŸ” æ‰‹åŠ¨é€‰æ‹©`select`.*
custom_proxy_group=âš¡ æœ€ä½å»¶è¿Ÿ`url-test`.*`https://www.gstatic.com/generate_204`180,,20

# åœ°åŒºåˆ†ç»„ - ä¼˜åŒ–æ­£åˆ™è¡¨è¾¾å¼
custom_proxy_group=ğŸ‡­ğŸ‡° é¦™æ¸¯`url-test`(?i)^(?=.*((?<![\w])æ¸¯|é¦™æ¸¯|HK|Hong Kong))(?!.*(å°|æ—¥|éŸ©|æ–°|ç¾|Transfer|Expire)).*$`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¯ğŸ‡µ æ—¥æœ¬`url-test`(?i)^(?=.*((?<![\w])æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|JP|Japan))(?!.*(å°|æ¸¯|éŸ©|æ–°|ç¾|Transfer|Expire)).*$`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡ºğŸ‡¸ ç¾å›½`url-test`(?i)^(?=.*((?<![\w])ç¾|ç¾å›½|ç¾åœ‹|æ´›æ‰çŸ¶|ç¡…è°·|è¾¾æ‹‰æ–¯|US|USA|America))(?!.*(å°|æ¸¯|æ—¥|éŸ©|æ–°|Transfer|Expire)).*$`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¹ğŸ‡¼ å°æ¹¾`url-test`(?i)^(?=.*((?<![\w])å°|å°æ¹¾|å°ç£|å°åŒ—|TW|Taiwan))(?!.*(æ¸¯|æ—¥|éŸ©|æ–°|ç¾|Transfer|Expire)).*$`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡`url-test`(?!.*ğŸ‡¸ğŸ‡¬)(?i)^(?=.*((?<![\w])æ–°|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore))(?!.*(æ¸¯|å°|æ—¥|éŸ©|ç¾|Transfer|Expire)).*$`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸŒ å…¶ä»–`select`^(?!.*((?<![\w])(æ¸¯|é¦™æ¸¯|HK|Hong Kong|æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|JP|Japan|æ–°|æ–°åŠ å¡|ç‹®åŸ|SG|Singapore|å°|å°æ¹¾|å°ç£|å°åŒ—|TW|Taiwan|ç¾|ç¾å›½|ç¾åœ‹|æ´›æ‰çŸ¶|ç¡…è°·|è¾¾æ‹‰æ–¯|US|USA|America|Transfer|Expire))).*$

# åº”ç”¨åˆ†ç»„ - ä¼˜åŒ–åº”ç”¨åˆ†ç»„
custom_proxy_group=ğŸŒ å›½é™…ç½‘ç«™`select`[]ğŸš€ å…¨å±€ä»£ç†`[]ğŸ‡ºğŸ‡¸ ç¾å›½`[]ğŸ‡­ğŸ‡° é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
custom_proxy_group=ğŸ“º æµåª’ä½“`select`[]ğŸš€ å…¨å±€ä»£ç†`[]ğŸ‡­ğŸ‡° é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡`[]ğŸ‡¹ğŸ‡¼ å°æ¹¾`[]ğŸ‡¯ğŸ‡µ æ—¥æœ¬
custom_proxy_group=ğŸ’¬ ç¤¾äº¤èŠå¤©`select`[]DIRECT`[]ğŸš€ å…¨å±€ä»£ç†`[]ğŸ‡­ğŸ‡° é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
custom_proxy_group=ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™`select`[]DIRECT
custom_proxy_group=ğŸ“± çŸ­è§†é¢‘`select`[]DIRECT
custom_proxy_group=ğŸ“¢ å¹¿å‘Šæ‹¦æˆª`select`[]REJECT
custom_proxy_group=ğŸŸ æ¼ç½‘ä¹‹é±¼`select`[]ğŸš€ å…¨å±€ä»£ç†`[]DIRECT

# åˆ†æµè§„åˆ™ - ä¼˜åŒ–é¡ºåºï¼Œå…ˆç›´è¿åä»£ç†
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list
ruleset=ğŸ“¢ å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyListChina.list
ruleset=ğŸ“¢ å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyPrivacy.list
ruleset=ğŸ’¬ ç¤¾äº¤èŠå¤©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/WeChat.list
ruleset=ğŸ’¬ ç¤¾äº¤èŠå¤©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Tencent.list
ruleset=ğŸ“± çŸ­è§†é¢‘,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/DouYin.list
ruleset=ğŸ“º æµåª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
ruleset=ğŸ“º æµåª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list
ruleset=ğŸŒ å›½é™…ç½‘ç«™,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/X/X.list
ruleset=ğŸŒ å›½é™…ç½‘ç«™,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Google.list
ruleset=ğŸŒ å›½é™…ç½‘ç«™,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Telegram.list
ruleset=ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/UnionPay.list
ruleset=ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/AliPay.list
ruleset=ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ByteDance/ByteDance_Classical.yaml
ruleset=ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Alibaba/Alibaba_Classical.yaml
ruleset=ğŸš€ å…¨å±€ä»£ç†,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
ruleset=ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=ğŸ‡¨ğŸ‡³ å›½å†…ç½‘ç«™,[]GEOIP,CN,no-resolve
ruleset=ğŸŸ æ¼ç½‘ä¹‹é±¼,[]FINAL

# TUNé…ç½® - æ›´é«˜æ€§èƒ½ä¼˜åŒ–
tun:
  enable: true
  stack: mixed
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true
  mtu: 9000
  strict-route: true
  endpoint-independent-nat: true
  include-uid: [0]
  include-uid-range: [0-999999]

# DNSé…ç½® - é˜²æ­¢DNSæ³„éœ²
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - 'localhost.ptlogin2.qq.com'
    - '+.stun.*.*'
    - '+.stdpt.*.*'
    - '+.stun.*.*.*'
    - '+.stdpt.*.*.*'
    - '+.msftncsi.com'
    - '+.srv.nintendo.net'
    - '+.ntp.org.cn'
    - '+.pool.ntp.org'
    - '+.stun.*.*.microsoft.com'
    - '+.turns.*.*.microsoft.com'
    - '+.cmpassport.com'
    - '+.*.cmpassport.com'
    - '+.10010.com'
    - '+.*.10010.com'
    - '+.189.cn'
    - '+.*.189.cn'
    - '+.id6.me'
    - 'dns.msftncsi.com'
    - 'networktest.windowsupdate.com'
    - 'www.msftncsi.com'
    - 'www.msftconnecttest.com'

  nameserver:
    - 223.6.6.6
    - 119.29.29.29
    - 114.114.114.114

  fallback:
    - tls://8.8.8.8:853
    - tls://1.1.1.1:853
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query

  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 127.0.0.0/8
      - 0.0.0.0/32
      - 100.64.0.0/10
      - 169.254.0.0/16
      - 192.0.0.0/24
      - 192.0.2.0/24
      - 198.51.100.0/24
      - 203.0.113.0/24
      - 224.0.0.0/4
    domain:
      - '+.google.com'
      - '+.youtube.com'
      - '+.github.com'
      - '+.facebook.com'
      - '+.x.com'
      - '+.instagram.com'
      - '+.netflix.com'
      - '+.discord.com'
      - '+.reddit.com'
      - '+.tiktok.com'

  default-nameserver:
    - 223.6.6.6
    - 119.29.29.29
    - 114.114.114.114

  nameserver-policy:
    'www.bilibili.com': [223.6.6.6]
    'api.bilibili.com': [223.6.6.6]
    '*.taobao.com': [223.6.6.6]
    '*.tmall.com': [223.6.6.6]
    '*.alipay.com': [223.6.6.6]
    '*.alicdn.com': [223.6.6.6]
    '*.aliyun.com': [223.6.6.6]
    '*.jd.com': [223.6.6.6]
    '*.qq.com': [119.29.29.29]
    '*.tencent.com': [119.29.29.29]
    '*.weixin.com': [119.29.29.29]
    '*.wechat.com': [119.29.29.29]
    '*.weiyun.com': [119.29.29.29]
    '+.cn': [223.6.6.6]

  caching: true
  cache-size: 15360

# åŸºç¡€è®¾ç½® - ç§»åŠ¨ç½‘ç»œä¼˜åŒ–
log-level: silent
mode: rule
allow-lan: false
unified-delay: true
tcp-concurrent: true
connection-multiplexing: true
tcp-no-delay: true
tcp-fast-open: true
tcp-early-data: true
buffer-pkts: true
mixed-port: 7890
sniff-pure-tls: true
tunnel-max-concurrent: 16
udp-relay-mode: native
proxy-reject-drop: true
disable-color: true
disable-discovery: true
geo-auto-update: true
geo-auto-update-interval: 24
tracing: false
profile-memory: false
external-controller: ""
secret: ""
experimental:
  ignore-resolve-fail: true

# æ€§èƒ½ä¼˜åŒ–å‚æ•° - é¢å¤–æ€§èƒ½æå‡
dial-context-timeout: 5
find-process: false
find-process-mode: off
memory-percentage: 15
proxy-check-ip-version: false
disable-fake-ip-v6: true
inbound-tfo: true
skip-cert-verify: true
proxy-groups-config:
  enabled: false
  interval: 600
dns-simultaneous: true
quic:
  enabled: true
  low-latency: true
  max-udp-relay-packet-size: 8192
transport-timeout: 10
tcp-keep-alive-period: 30
tcp-concurrent-reuse: true
interface-name: ""
proxy-check-timeout: 5
store-selected: true
store-fake-ip: true
ebpf:
  redirect-to-tun:
    - eth0
    - en0
  auto-redir: true

# åè®®è®¾ç½® - æ›´é«˜æ•ˆä¼ è¾“å‚æ•°
max-udp-packet-size: 10240
http:
  max-connections-per-host: 32
  connection-pool-size: 512
  idle-timeout: 60
http2:
  max-concurrent-streams: 1024
tls:
  fast-open: true
  reuse-session: true
  session-ticket: true
  session-cache-size: 1024
  h2-idempotent-methods: [HEAD, GET, OPTIONS]

# åœ°ç†æ•°æ®æ–‡ä»¶
geox-url:
  geoip: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat
  geosite: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb
  asn: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb

geodata-mode: true
geodata-loader: memconservative
geoip-maxmind-compatibility: true

# ç½‘ç»œå—…æ¢ - æ€§èƒ½ä¼˜åŒ–ç‰ˆ
sniffer:
  enable: true
  force-dns-mapping: true
  override-destination: true
  parse-pure-ip: true
  sniffing: [tls, http]
  port-whitelist: [80, 443, 8000-9000]
  skip-domain:
    - 'Mijia Cloud'
    - '*.iCloud.*'
    - '*.10010.com'
    - '*.189.cn'
    - '*.cmpassport.com'
    - '*.opencloud.wostore.cn'
    - '+.cn'
  sniff-timeout: 1.0
  always-resolve-first: false
  forest-fire: true
