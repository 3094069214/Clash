[custom]
;é‡è¦ï¼æ¯ä¸ªç»„åçš„ç©ºæ ¼åé¢éƒ½æ·»åŠ äº†ä¸€ä¸ªéšè—å­—ç¬¦ \u200d ç”¨äºé˜²æ­¢ä¸èŠ‚ç‚¹é‡åï¼Œæ”¹åéœ€è°¨æ…

exclude_remarks=(Data Left|Remain:|Traffic:|Expir[ey]|Reset|(\d[\d.]*\s*[MG]B[^\dA-Za-z]+|[:ï¼š]\s*)\d[\d.]*\s*GB(?![\dA-Za-z])|å‰©[ä½™é¤˜]æµé‡|æµé‡ï¼š|[åˆ°è¿‡éæ•ˆ]æœŸ|[æ—¶æ™‚][é—´é–“]|é‡ç½®|åˆ†å‰²çº¿|æ®‹ã‚Šä½¿ç”¨å®¹é‡|æœ‰åŠ¹æœŸé™|ãƒªã‚»ãƒƒãƒˆ|ğŸ”° (ID|HSD|SNI):|ğŸ“ GÃ³i:)

add_emoji=true
remove_old_emoji=false
emoji=(?!ğŸ‡¨ğŸ‡³)[ğŸ‡¦-ğŸ‡¿]{2},
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ç¾å›½|åç››é¡¿|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ—§é‡‘å±±|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|çº½çº¦|ä¸¹ä½›|åŠ åˆ©ç¦å°¼äºš|å¼—å‰å°¼äºš|å¾—å…‹è¨æ–¯|äºšç‰¹å…°å¤§|ä½›ç½—é‡Œè¾¾|è¿ˆé˜¿å¯†|United States|Washington|Portland|Dallas|Oregon|Phoenix|Fremont|Silicon Valley|San Francisco|Las Vegas|Los Angeles|San Jose|Santa Clara|Seattle|Chicago|New York|Denver|California|Virginia|Texas|Atlanta|Florida|Miami),ğŸ‡ºğŸ‡¸
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(é¦™æ¸¯|Hong Kong),ğŸ‡­ğŸ‡°
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|åå¤å±‹|åŸ¼ç‰|ç¦å†ˆ|Japan|Tokyo|Osaka|Nagoya|Saitama|Fukuoka),ğŸ‡¯ğŸ‡µ
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ–°åŠ å¡|Singapore),ğŸ‡¸ğŸ‡¬
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å°æ¹¾|å°åŒ—|æ–°åŒ—|å½°åŒ–|é«˜é›„|Taiwan|Taipei|New Taipei|Changhua|Kaohsiung),ğŸ‡¹ğŸ‡¼
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(è‹±å›½|è‹±æ ¼å…°|ä¼¦æ•¦|æ›¼å½»æ–¯ç‰¹|United Kingdom|England|London|Manchester),ğŸ‡¬ğŸ‡§
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(åŠ æ‹¿å¤§|å¤šä¼¦å¤š|è’™ç‰¹åˆ©å°”|æ¸©å“¥å|Canada|Toronto|Montreal|Vancouver),ğŸ‡¨ğŸ‡¦
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å¾·å›½|æ³•å…°å…‹ç¦|æŸæ—|Germany|Frankfurt|Berlin),ğŸ‡©ğŸ‡ª
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ³•å›½|å·´é»|France|Paris),ğŸ‡«ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(éŸ©å›½|é¦–å°”|South Korea|Seoul),ğŸ‡°ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ¾³å¤§åˆ©äºš|æ‚‰å°¼|å¢¨å°”æœ¬|Australia|Sydney|Melbourne),ğŸ‡¦ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¿„ç½—æ–¯|è«æ–¯ç§‘|åœ£å½¼å¾—å ¡|Russia|Moscow|Saint Petersburg),ğŸ‡·ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¸­å›½|æ·±åœ³|åŒ—äº¬|ä¸Šæµ·|å¹¿ä¸œ|å±±ä¸œ|æ¹–åŒ—|æ¹–å—|å¤©æ´¥|é‡åº†|è¾½å®|å‰æ—|é»‘é¾™æ±Ÿ|æ±Ÿè‹|æµ™æ±Ÿ|å®‰å¾½|ç¦å»º|äº‘å—|å››å·|é™•è¥¿|ç”˜è‚ƒ|é’æµ·|å†…è’™å¤|è¥¿è—|å®å¤|æ–°ç–†|China|Shenzhen|Beijing|Shanghai|Guangdong|Shandong|Hubei|Hunan|Tianjin|Chongqing|Liaoning|Jilin|Heilongjiang|Jiangsu|Zhejiang|Anhui|Fujian|Yunnan|Sichuan|Shaanxi|Gansu|Qinghai|Inner Mongolia|Tibet|Ningxia|Xinjiang),ğŸ‡¨ğŸ‡³
emoji=^(?!.*([ğŸ‡¦-ğŸ‡¿]{2}|â„¹ï¸)).*(å®˜.?ç½‘|å®˜æ–¹|äº§å“|å¹³å°|å‹¿è¿|ä¿®å¤|æ¢å¤|æ›´æ–°|åœ°å€|ç½‘ç«™|ç½‘å€|åŸŸå|ç½‘åŸŸ|æµè§ˆå™¨|å¯¼èˆª|æœ|ç¾¤|è£™|èŠ|é¢‘é“|ç”µæŠ¥|é£æœº|æ‰£|å¾®ä¿¡|å”®å|å®¢æœ|å·¥å•|è”ç³»|ä½¿ç”¨|è´­ä¹°|ç»­è´¹|è®¢é˜…|å…¬å‘Š|ç‰ˆæœ¬|å‡ºç°|æ²¡ç½‘|æƒ…å†µ|å¼€é€š|æ•°é‡|æ³¨|è¯´æ˜|é€šçŸ¥|å»é™¤|è¿‡æ»¤|@|ï¼š|(?i:(?<![\da-z])(tg|telegram|t\.me|qq?|vx?|wx)(?!\d*[a-z]|\d{1,3}(?!\d))|^[^:]+:(?![\da-f]{0,4}:|\s*\d{1,5}([/?]|\s*$)))),â„¹ï¸

enable_rule_generator=true
overwrite_original_rules=true

# æ›´é«˜æ•ˆçš„ä»£ç†ç»„ç»“æ„
custom_proxy_group=âœˆï¸èµ·é£`select`[]âš¡ä½å»¶è¿Ÿ`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š`[]DIRECT`[]REJECT
custom_proxy_group=âš¡ä½å»¶è¿Ÿ`url-test`.*`https://www.gstatic.com/generate_204`180,,50
custom_proxy_group=ğŸ‘†ğŸ»æŒ‡å®š`select`.*

# ç›´è¿ä¸æ‹¦æˆªåˆ†ç»„ï¼Œå¢åŠ å¯é€‰æ‹©æ€§
custom_proxy_group=ğŸ›©ï¸å¢™å†…`select`[]DIRECT`[]âœˆï¸èµ·é£
custom_proxy_group=ğŸ’©å¹¿å‘Š`select`[]REJECT`[]DIRECT`[]âœˆï¸èµ·é£

# æµåª’ä½“ä¸ç¤¾äº¤åº”ç”¨åˆ†ç»„ä¼˜åŒ–
custom_proxy_group=ğŸ“ºBç«™`select`[]ğŸ›©ï¸å¢™å†…`[]DIRECT`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾
custom_proxy_group=ğŸ¬æµåª’ä½“`select`[]âœˆï¸èµ·é£`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ¬Netflix`select`[]ğŸ¬æµåª’ä½“`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ¬YouTube`select`[]ğŸ¬æµåª’ä½“`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½
custom_proxy_group=ğŸ“²ç¤¾äº¤åª’ä½“`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ“±ç”µæŠ¥`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š

# ç‰¹æ®Šåº”ç”¨æœåŠ¡åˆ†ç»„
custom_proxy_group=ğŸ¤–AI`select`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]âœˆï¸èµ·é£`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ®æ¸¸æˆå¹³å°`select`[]âœˆï¸èµ·é£`[]DIRECT`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ›¡ï¸GoogleæœåŠ¡`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]DIRECT
custom_proxy_group=â“‚ï¸å¾®è½¯æœåŠ¡`select`[]DIRECT`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬
custom_proxy_group=ğŸè‹¹æœæœåŠ¡`select`[]DIRECT`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬
custom_proxy_group=ğŸŸ¢Spotify`select`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]DIRECT`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ“§é‚®ä»¶æœåŠ¡`select`[]âœˆï¸èµ·é£`[]DIRECT`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ”æœç´¢å¼•æ“`select`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]DIRECT
custom_proxy_group=ğŸŸæ¼ç½‘ä¹‹é±¼`select`[]âœˆï¸èµ·é£`[]ğŸ›©ï¸å¢™å†…`[]ğŸ’©å¹¿å‘Š`[]DIRECT`[]ğŸ‘†ğŸ»æŒ‡å®š

# åœ°åŒºèŠ‚ç‚¹ç»„ä¼˜åŒ– - æé«˜æµ‹è¯•æ•ˆç‡
custom_proxy_group=ğŸ‡­ğŸ‡°é¦™æ¸¯`url-test`(?i)æ¸¯|hongkong|hk`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¹ğŸ‡¼å°æ¹¾`url-test`(?i)å°|taiwan|tw`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`url-test`(?i)æ–°|singapore|sg`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¯ğŸ‡µæ—¥æœ¬`url-test`(?i)æ—¥|japan|jp`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡ºğŸ‡¸ç¾å›½`url-test`(?i)ç¾|states|us`https://www.gstatic.com/generate_204`300,,150
custom_proxy_group=ğŸå…¶ä»–`url-test`^(?!.*(æ¸¯|å°|æ–°|æ—¥|ç¾|hongkong|hk|taiwan|tw|singapore|sg|japan|jp|states|us)).*$`https://www.gstatic.com/generate_204`300,,100

# ä¼˜åŒ–è§„åˆ™åŒ¹é…é¡ºåºï¼Œä½¿ç”¨æœ€æ–°ç»´æŠ¤çš„è§„åˆ™æº
ruleset=ğŸ’©å¹¿å‘Š,clash-domain:https://anti-ad.net/clash.yaml
# ä½¿ç”¨AdvertisingLiteæ›¿ä»£å®Œæ•´Advertisingè§„åˆ™ï¼Œå‡å°‘é‡å¤å’Œæé«˜æ•ˆç‡
ruleset=ğŸ’©å¹¿å‘Š,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite.list
ruleset=DIRECT,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.list

# å¸¸ç”¨å¿…é¡»åº”ç”¨ä¼˜å…ˆåŒ¹é… - ä½¿ç”¨ç»´æŠ¤è‰¯å¥½çš„è§„åˆ™æº
ruleset=ğŸ“±ç”µæŠ¥,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/telegramcidr.txt
ruleset=ğŸ“±ç”µæŠ¥,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Anthropic/Anthropic.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Perplexity/Perplexity.list
ruleset=ğŸ“ºBç«™,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBiliIntl/BiliBiliIntl.list
ruleset=ğŸ“ºBç«™,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.list

# æµåª’ä½“åˆ†æµä¼˜åŒ– - ä½¿ç”¨blackmatrix7çš„å…¨é¢è§„åˆ™é›†
ruleset=ğŸ¬Netflix,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list
ruleset=ğŸ¬YouTube,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list
ruleset=ğŸ¬YouTube,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTubeMusic/YouTubeMusic.list
ruleset=ğŸŸ¢Spotify,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list
ruleset=ğŸ¬æµåª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.list

# å¿…è¦çš„æœåŠ¡åˆ†ç»„ - æ›´æ–°ä¸ºæœ€æ–°è§„åˆ™æº
ruleset=ğŸ›¡ï¸GoogleæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list
ruleset=ğŸè‹¹æœæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list
ruleset=â“‚ï¸å¾®è½¯æœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list
ruleset=â“‚ï¸å¾®è½¯æœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.list
ruleset=ğŸ“§é‚®ä»¶æœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Mail/Mail.list

# å¢åŠ å¼€å‘è€…æœåŠ¡è§„åˆ™
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitLab/GitLab.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Developer/Developer.list

# æ¸¸æˆå¹³å°å’Œç¤¾äº¤åª’ä½“ - ä½¿ç”¨æ›´å…¨é¢çš„è§„åˆ™
ruleset=ğŸ®æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.list
ruleset=ğŸ”æœç´¢å¼•æ“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SearchEngine/SearchEngine.list

# ç¤¾äº¤åª’ä½“æ•´åˆè§„åˆ™ - ä½¿ç”¨ç»¼åˆæ€§è§„åˆ™
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.list
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Instagram/Instagram.list
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.list
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Tiktok/Tiktok.list

# æ–°å¢å·¥ä½œå’Œåä½œå·¥å…·è§„åˆ™
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Slack/Slack.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Zoom/Zoom.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Notion/Notion.list

# å›½å†…åº”ç”¨å’ŒæœåŠ¡å¢å¼ºè§„åˆ™ - æ›´ç»†åˆ†çš„åˆ†ç±»
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Mainland/Mainland.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SteamCN/SteamCN.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Tencent/Tencent.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Alibaba/Alibaba.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ByteDance/ByteDance.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/direct.txt
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/cncidr.txt
ruleset=ğŸ›©ï¸å¢™å†…,[]GEOIP,CN,no-resolve

# å…¶ä»–å›½å¤–ç½‘ç«™è§„åˆ™ - ä½¿ç”¨æœ€æ–°ç»´æŠ¤çš„è§„åˆ™
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/proxy.txt
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global.list

# æ¼ç½‘ä¹‹é±¼
ruleset=ğŸŸæ¼ç½‘ä¹‹é±¼,[]FINAL

# ===== åŸºç¡€è®¾ç½® =====
mixed-port: 10808
allow-lan: true
bind-address: '*'
mode: rule
log-level: warning
ipv6: false
external-controller: 127.0.0.1:9090
external-ui: dashboard
secret: ""

# ===== ç§»åŠ¨è®¾å¤‡TUNä¼˜åŒ–é…ç½® =====
tun:
  enable: true
  stack: gvisor  # ç§»åŠ¨è®¾å¤‡æ¨ègvisor
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true
  mtu: 1400  # ç§»åŠ¨è®¾å¤‡æ›´é€‚åˆçš„MTUå€¼ï¼Œé™ä½åˆ†ç‰‡é£é™©
  # ç§»åŠ¨è®¾å¤‡TUNæ€§èƒ½ä¼˜åŒ–
  tcp-balance: true             # TCPè´Ÿè½½å‡è¡¡
  udp-balance: true             # UDPè´Ÿè½½å‡è¡¡
  stack-buffer: 4096            # å †æ ˆç¼“å†²å¤§å°ä¼˜åŒ–
  endpoint-independent-nat: true  # ç‹¬ç«‹ç«¯ç‚¹NATï¼Œæé«˜å…¼å®¹æ€§
  # ä¼˜åŒ–è·¯ç”±æ’é™¤åˆ—è¡¨
  bypass:
    - 127.0.0.1/8
    - 169.254.0.0/16
    - 192.168.0.0/16
    - 10.0.0.0/8
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 224.0.0.0/24
    - ::1/128
    - fc00::/7
    - fe80::/10
    - fd00::/8

# ===== DNSé…ç½®ä¼˜åŒ– - ç§»åŠ¨ç«¯å‹å¥½ç‰ˆ =====
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true  # æ·»åŠ hostsæ”¯æŒï¼Œå¯æé«˜æŸäº›åŸŸåè§£æé€Ÿåº¦
  # é¢„åŠ è½½å¸¸ç”¨åŸŸåDNS
  preload-domain: true
  # æé«˜DNSå“åº”é€Ÿåº¦çš„å‚æ•°
  nameserver-cache-size: 4096  # å¢åŠ DNSç¼“å­˜æ¡ç›®æ•°
  prefer-h3: true  # é¦–é€‰HTTP/3è¿›è¡ŒDNSæŸ¥è¯¢ï¼Œæé«˜æ€§èƒ½

  # é˜²æ³„æ¼é»˜è®¤DNS - æ”¾åœ¨æœ€å‰é¢ç¡®ä¿ä¼˜å…ˆçº§
  default-nameserver:
    - 223.6.6.6
    - 8.8.8.8

  # ç§»åŠ¨ç«¯å‹å¥½DNSæœåŠ¡å™¨ - é™ä½å»¶è¿Ÿå’Œç”µæ± æ¶ˆè€—
  nameserver:
    - https://223.6.6.6/dns-query # é˜¿é‡ŒDNS DoH
    - 223.6.6.6 # é˜¿é‡ŒDNSå¤‡ç”¨

  # ç²¾ç®€å›½é™…å›è½DNSåˆ—è¡¨ - ç§»åŠ¨ç«¯ä¼˜åŒ–
  fallback:
    - https://dns.alidns.com/dns-query # é˜¿é‡Œ
    - https://dns.google/dns-query # Google
    - https://dns.cloudflare.com/dns-query # Cloudflare

  # ä»£ç†æœåŠ¡å™¨DNS
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query # é˜¿é‡Œ
    - https://dns.google/dns-query # Google

  # ä¼˜åŒ–DNSåˆ†æµç­–ç•¥ï¼Œæ›´ç²¾ç»†çš„åŸŸååˆ†ç±»
  nameserver-policy:
    'geosite:cn,microsoft-cn,apple-cn,category-games-cn': [223.6.6.6, 119.29.29.29]
    'geosite:geolocation-!cn,category-dev,category-science': [https://dns.cloudflare.com/dns-query, https://dns.google/dns-query]
    'geosite:category-ads-all': [https://doh.alidns.com/dns-query]
    'domain:office.com,domain:office365.com,domain:sharepoint.com': [tls://dns.quad9.net, https://dns.cloudflare.com/dns-query]
    'domain:twitter.com,domain:instagram.com': [https://dns.google/dns-query]  # ç¤¾äº¤åª’ä½“ç‰¹åˆ«ä¼˜åŒ–
    'domain:cdn.jsdelivr.net': [https://223.5.5.5/dns-query, https://doh.pub/dns-query]
    'domain:fastly.net': [https://doh.pub/dns-query]
    'domain:akamaiedge.net': [https://223.5.5.5/dns-query]
    'domain:cloudfront.net': [https://dns.google/dns-query]

  # å¸¸ç”¨åŸŸåTTLä¼˜åŒ–
  domain-ttl:
    'apple.com': 3600
    'microsoft.com': 3600
    'qq.com': 3600
    'taobao.com': 3600
    'baidu.com': 3600
    'jd.com': 3600
    'google.com': 3600

  # æœ¬åœ°hostsä¼˜å…ˆçº§(æ¯”è¿œç¨‹DNSæ›´ä¼˜å…ˆ)
  hosts:
    'mtalk.google.com': 108.177.125.188
    'dl.google.com': 142.250.4.132
    'mobile-gtalk.l.google.com': 108.177.125.188

  # å¢å¼ºé˜²DNSåŠ«æŒï¼Œæ‰©å……fake-ipè¿‡æ»¤æ¸…å•
  fake-ip-filter:
    - '*.lan'
    - 'stun.*.*.*'
    - 'stun.*.*'
    - '*.msftncsi.com'
    - '*.msftconnecttest.com'
    - '*.home.arpa'
    - 'time.*.com'
    - 'time.*.gov'
    - 'time.*.apple.com'
    - 'time1.*.com'
    - 'time2.*.com'
    - 'time3.*.com'
    - 'time4.*.com'
    - 'time5.*.com'
    - 'time6.*.com'
    - 'time7.*.com'
    - 'ntp.*.com'
    - 'ntp1.*.com'
    - 'ntp2.*.com'
    - 'ntp3.*.com'
    - 'ntp4.*.com'
    - 'ntp5.*.com'
    - 'ntp6.*.com'
    - 'ntp7.*.com'
    - '*.local'
    - 'local'
    - 'time.windows.com'
    - 'tracker.*.*'  # è¿‡æ»¤BT/PTæµé‡ï¼Œé™ä½æµé‡æ¶ˆè€—
    - 'seed.*.*'     # è¿‡æ»¤BT/PTæµé‡ï¼Œé™ä½æµé‡æ¶ˆè€—
    - '*.pool.ntp.org' # æ·»åŠ NTPæœåŠ¡å™¨åŸŸå

# ===== è¿æ¥ä¸æ€§èƒ½ä¼˜åŒ– =====
# ä¼˜åŒ–TCPè¿æ¥
tcp-concurrent: true            # å¼€å¯TCPå¹¶å‘ï¼Œæé«˜å¤šè¿æ¥æ€§èƒ½
tcp-concurrent-max: 512         # æœ€å¤§å¹¶å‘TCPè¿æ¥
tcp-concurrent-reuse: true      # å¤ç”¨å¹¶å‘è¿æ¥
tcp-fast-open-queue: 512        # TCP Fast Opené˜Ÿåˆ—å¤§å°
tcp-no-delay: true              # å¯ç”¨TCP No Delayï¼Œå‡å°‘å»¶è¿Ÿ
inbound-tfo: true               # å…¥ç«™TCP Fast Open
outbound-tfo: true              # å‡ºç«™TCP Fast Open
inbound-buffer-size: 8192       # ç§»åŠ¨è®¾å¤‡å†…å­˜ä¼˜åŒ–
outbound-buffer-size: 8192      # ç§»åŠ¨è®¾å¤‡å†…å­˜ä¼˜åŒ–
buffer-size: 16384              # æ•´ä½“ç¼“å†²åŒºå¤§å°

# è¿æ¥æ€§èƒ½ä¼˜åŒ–
connection-timeout: 5           # è¿æ¥è¶…æ—¶5ç§’(å‡å°‘ç­‰å¾…æ—¶é—´)
dial-timeout: 3                 # æ‹¨å·è¶…æ—¶3ç§’
keep-alive-interval: 30         # å•ä½ï¼šç§’ï¼Œç§»åŠ¨è®¾å¤‡ç”µæ± ä¼˜åŒ–
find-process-refresh-interval: 30  # è¿›ç¨‹åˆ·æ–°é—´éš”(ç§’)
disable-logger: true            # ç¦ç”¨æ—¥å¿—è®°å½•ï¼Œé™ä½å¼€é”€

# æ™ºèƒ½æ–­çº¿é‡è¿è®¾ç½®
auto-reconnect: true
reconnect-interval: 3  # ç§»åŠ¨ç½‘ç»œä¸‹çš„åˆç†é‡è¿é—´éš”

# ç¼“å­˜ä¼˜åŒ–è®¾ç½®
cache:
  enable: true
  size: 8192  # é€‚åˆç§»åŠ¨è®¾å¤‡çš„ç¼“å­˜å¤§å°ï¼ˆå•ä½KBï¼‰
  ttl: 3600   # ç¼“å­˜æ—¶é—´ï¼ˆç§’ï¼‰
  store-fakeip: true
  persistence: true  # æŒä¹…åŒ–ç¼“å­˜ï¼Œåº”ç”¨é€€å‡ºåä¿ç•™
  memory-ratio: 0.2             # å†…å­˜ç¼“å­˜æ¯”ä¾‹ï¼Œé¿å…å ç”¨è¿‡å¤šå†…å­˜
  disk-ratio: 0.8               # ç£ç›˜ç¼“å­˜æ¯”ä¾‹
  optimistic-dns: true          # ä¹è§‚DNSç¼“å­˜ï¼Œæé«˜å“åº”é€Ÿåº¦

# è§„åˆ™ç¼“å­˜ä¼˜åŒ–
rule-cache:
  enable: true                  # å¯ç”¨è§„åˆ™ç¼“å­˜
  size: 10240                   # ç¼“å­˜å¤§å°
  ttl: 7200                     # æœ‰æ•ˆæœŸ2å°æ—¶

# ===== æµé‡ä¸å†…å®¹æ£€æµ‹ =====
# æµé‡å—…æ¢è®¾ç½®
sniff:
  enable: true
  override-destination: true
  parse-pure-ip: true
  # æ·»åŠ å—…æ¢èµ„æºç±»å‹
  force-domain: true
  skip-domain:
    - '*.alipay.com'  # è·³è¿‡æŸäº›æ•æ„ŸåŸŸåï¼Œé¿å…è¯¯åˆ¤
    - '*.pay.*.com'

# ç²¾ç»†åŒ–å—…æ¢å™¨é…ç½®
sniffer:
  enable: true
  sniff:
    http: true
    tls: true
    quic: true
    mtls: true  # æ·»åŠ æ›´å¤šåè®®æ”¯æŒ
  force-domain: true
  skip-domain:
    - 'Mijia Cloud'
    - 'dlg.io.mi.com'
    - '*.alipay.com'
    - '*.weixin.qq.com'  # è·³è¿‡å¾®ä¿¡æœåŠ¡ï¼Œä¼˜åŒ–ç§»åŠ¨ä½“éªŒ
    - '*.pay.*.com'      # è·³è¿‡æ”¯ä»˜ç›¸å…³åŸŸå
  port-whitelist:
    - 80
    - 443
    - 8000-9000
  # æ·»åŠ ä¼˜åŒ–ç§»åŠ¨è®¾å¤‡å¸¸ç”¨ç«¯å£
  sniffing-timeout: 200  # ç§»åŠ¨è®¾å¤‡å—…æ¢è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

# ===== ç§»åŠ¨è®¾å¤‡ç‰¹æ®Šä¼˜åŒ– =====
# ç§»åŠ¨è®¾å¤‡ç”µé‡ä¼˜åŒ–é…ç½®
profile:
  store-selected: true
  store-fake-ip: true
  tracing: false  # å…³é—­è¿½è¸ªåŠŸèƒ½èŠ‚çœç”µé‡

# æ™ºèƒ½ç½‘ç»œåˆ‡æ¢å¤„ç†
wifi-ssid-switch:
  enable: true
  default: "DIRECT"
  ssid:
    "home-wifi": "DEFAULT"
    "work-wifi": "PROXY"
    "pay-wifi": "DIRECT"

# ä½ç”µé‡æ¨¡å¼è®¾ç½®
battery-saver:
  enable: true
  threshold: 20  # ç”µé‡ä½äº20%æ—¶å¯ç”¨çœç”µæ¨¡å¼
  save-mode:
    tcp-concurrent: false # ä½ç”µé‡æ—¶å…³é—­å¹¶å‘è¿æ¥
    keep-alive-interval: 60 # ä½ç”µé‡æ—¶å»¶é•¿ä¿æ´»é—´éš”
    sniff: selective # ä½ç”µé‡æ—¶ä»…é€‰æ‹©æ€§å—…æ¢

# å†…å­˜ä½¿ç”¨ä¼˜åŒ–
memory:
  optimize-for: speed           # ä¼˜åŒ–é€Ÿåº¦è€Œéå†…å­˜å ç”¨
  gc-interval: 300              # åƒåœ¾å›æ”¶é—´éš”(ç§’)
  max-log-size: 1               # æœ€å¤§æ—¥å¿—å¤§å°(MB)

# ä½å»¶è¿Ÿæ¨¡å¼
low-latency-mode:
  enable: true                  # å¯ç”¨ä½å»¶è¿Ÿæ¨¡å¼
  # ä½å»¶è¿Ÿä¸‹çš„ä¼˜åŒ–è®¾ç½®
  handshake-timeout: 3          # æ¡æ‰‹è¶…æ—¶(ç§’)
  socket-buffer-size: 16384     # å¥—æ¥å­—ç¼“å†²åŒºå¤§å°

# ç§»åŠ¨è®¾å¤‡é«˜çº§ä¼˜åŒ–
mobile-optimization:
  enable: true                  # å¯ç”¨ç§»åŠ¨ä¼˜åŒ–
  # ç§»åŠ¨è®¾å¤‡ç‰¹å®šä¼˜åŒ–
  wake-lock: selective          # é€‰æ‹©æ€§ä½¿ç”¨å”¤é†’é”
  reduce-background-traffic: true  # å‡å°‘åå°æµé‡
  prioritize-interactive-traffic: true  # äº¤äº’æµé‡ä¼˜å…ˆ

# QUICåè®®æ”¯æŒ(HTTP/3)
quic:
  enable: true                  # å¯ç”¨QUICæ”¯æŒ
  max-idle-timeout: 30          # æœ€å¤§ç©ºé—²è¶…æ—¶(ç§’)
  keep-alive-interval: 15       # ä¿æ´»é—´éš”(ç§’)
  0-rtt: true                   # å¯ç”¨0-RTTï¼Œé™ä½å»¶è¿Ÿ

# é’ˆå¯¹ä¸åŒç½‘ç»œçš„è‡ªé€‚åº”ä¼˜åŒ–
network-profiles:
  wifi:
    # WiFiç½‘ç»œä¸‹çš„æœ€ä½³æ€§èƒ½è®¾ç½®
    buffer-size: 32768
    tcp-concurrent: true
    keep-alive-interval: 15
    dns-prefetch: aggressive
  mobile:
    # ç§»åŠ¨æ•°æ®ä¸‹çš„æœ€ä½³æ€§èƒ½/åŠŸè€—å¹³è¡¡
    buffer-size: 8192
    tcp-concurrent: selective
    keep-alive-interval: 45
    dns-prefetch: conservative
  roaming:
    # æ¼«æ¸¸çŠ¶æ€ä¸‹çš„è®¾ç½®
    buffer-size: 4096
    tcp-concurrent: false
    keep-alive-interval: 60
    dns-prefetch: disabled

# ===== å…¨å±€è®¾ç½®ä¸å®éªŒåŠŸèƒ½ =====
# åœ°ç†ä½ç½®æ•°æ®åŠ è½½
geodata-mode: true
geodata-loader: standard  # ç§»åŠ¨è®¾å¤‡ä½¿ç”¨æ ‡å‡†åŠ è½½å™¨ï¼Œå¹³è¡¡å†…å­˜ä¸æ€§èƒ½
global-client-fingerprint: chrome  # ç»Ÿä¸€å®¢æˆ·ç«¯æŒ‡çº¹
find-process-mode: always  # ç§»åŠ¨è®¾å¤‡æ›´ç²¾å‡†çš„è¿›ç¨‹æ§åˆ¶

# ç§»åŠ¨ç½‘ç»œæµ‹è¯•å‚æ•°
internet-test-url: http://www.gstatic.com/generate_204  # è¿æ¥æµ‹è¯•ä¼˜åŒ–
proxy-test-url: http://cp.cloudflare.com/generate_204  # ä»£ç†æµ‹è¯•ä¼˜åŒ–
test-timeout: 5  # ç§»åŠ¨ç½‘ç»œæµ‹è¯•è¶…æ—¶è®¾ç½®ï¼ˆç§’ï¼‰

# å®éªŒæ€§åŠŸèƒ½æ”¯æŒ
experimental:
  ignore-resolve-fail: true     # å¿½ç•¥è§£æå¤±è´¥ï¼Œæé«˜ç§»åŠ¨ç½‘ç»œç¨³å®šæ€§
  routing-mark: 255
  # æ·»åŠ ç§»åŠ¨è®¾å¤‡å®éªŒæ€§ä¼˜åŒ–
  clash-for-android:
    append-system-dns: false    # ä¸è¿½åŠ ç³»ç»ŸDNSï¼Œé¿å…æ³„éœ²
    ui-delay-connect: true      # UIè¿æ¥å»¶è¿Ÿï¼Œæé«˜å“åº”æ€§
  quic-receive-window: 16777216 # QUICæ¥æ”¶çª—å£å¤§å°ä¼˜åŒ–
  bbr: true                     # å¯ç”¨BBRæ‹¥å¡æ§åˆ¶ç®—æ³•
  optimistic-connection: true   # ä¹è§‚è¿æ¥ç­–ç•¥
  compression: true             # å¯ç”¨å‹ç¼©
