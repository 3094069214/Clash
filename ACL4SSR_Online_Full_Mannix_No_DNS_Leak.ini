[custom]

# ========== åŸºç¡€è®¾ç½® ==========
# é€šç”¨æ’é™¤å…³é”®è¯ - æ’é™¤æµé‡è€—å°½ã€è¿‡æœŸæˆ–æµ‹è¯•èŠ‚ç‚¹
exclude_remarks=(Data Left|Remain:|Traffic:|Expir[ey]|Reset|(\d[\d.]*\s*[MG]B[^\dA-Za-z]+|[:ï¼š]\s*)\d[\d.]*\s*GB(?![\dA-Za-z])|å‰©[ä½™é¤˜]æµé‡|æµé‡ï¼š|[åˆ°è¿‡éæ•ˆ]æœŸ|[æ—¶æ™‚][é—´é–“]|é‡ç½®|åˆ†å‰²çº¿|æ®‹ã‚Šä½¿ç”¨å®¹é‡|æœ‰åŠ¹æœŸé™|ãƒªã‚»ãƒƒãƒˆ|ğŸ”° (ID|HSD|SNI):|ğŸ“ GÃ³i:|ãƒ‘ãƒƒã‚¯|ã‚®ã‚¬|å¸³è™Ÿåˆ°æœŸ|æµé‡ç”¨å®Œ|è¿‡æœŸ|å¤±æ•ˆ|åˆ°æœŸ|æµ‹è¯•|test|refresh)

# åŸºç¡€ç½‘ç»œä¼˜åŒ–è®¾ç½® (è®¢é˜…è½¬æ¢å‚æ•°)
udp_flag=true                   # å¯ç”¨UDPæ”¯æŒï¼Œå¯¹æ¸¸æˆã€è§†é¢‘é€šè¯å¿…è¦
tcp_fast_open_flag=true         # å¯ç”¨TCPå¿«é€Ÿæ‰“å¼€ï¼Œæé«˜è¿æ¥é€Ÿåº¦
skip_cert_verify_flag=true      # è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œé¿å…è¯ä¹¦é”™è¯¯
skip_dns_verify_flag=true       # è·³è¿‡DNSéªŒè¯ï¼Œé¿å…DNSæ³„éœ²

# è§„åˆ™ç”Ÿæˆè®¾ç½®
enable_rule_generator=true
overwrite_original_rules=true

# Emoji è®¾ç½® - é€‚åˆç§»åŠ¨è®¾å¤‡æ˜¾ç¤º
add_emoji=true
remove_old_emoji=true
emoji=(?!ğŸ‡¨ğŸ‡³)[ğŸ‡¦-ğŸ‡¿]{2},
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ç¾å›½|åç››é¡¿|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ—§é‡‘å±±|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|çº½çº¦|ä¸¹ä½›|åŠ åˆ©ç¦å°¼äºš|å¼—å‰å°¼äºš|å¾—å…‹è¨æ–¯|äºšç‰¹å…°å¤§|ä½›ç½—é‡Œè¾¾|è¿ˆé˜¿å¯†|US|USA|United States|Washington|Portland|Dallas|Oregon|Phoenix|Fremont|Silicon Valley|San Francisco|Las Vegas|Los Angeles|San Jose|Santa Clara|Seattle|Chicago|New York|Denver|California|Virginia|Texas|Atlanta|Florida|Miami),ğŸ‡ºğŸ‡¸
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(é¦™æ¸¯|HK|Hong Kong),ğŸ‡­ğŸ‡°
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|åå¤å±‹|åŸ¼ç‰|ç¦å†ˆ|JP|Japan|Tokyo|Osaka|Nagoya|Saitama|Fukuoka),ğŸ‡¯ğŸ‡µ
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ–°åŠ å¡|ç‹®åŸ|SG|Singapore),ğŸ‡¸ğŸ‡¬
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å°æ¹¾|å°åŒ—|æ–°åŒ—|å½°åŒ–|é«˜é›„|TW|Taiwan|Taipei|New Taipei|Changhua|Kaohsiung),ğŸ‡¹ğŸ‡¼
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(è‹±å›½|è‹±æ ¼å…°|ä¼¦æ•¦|æ›¼å½»æ–¯ç‰¹|UK|United Kingdom|England|London|Manchester),ğŸ‡¬ğŸ‡§
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(åŠ æ‹¿å¤§|å¤šä¼¦å¤š|è’™ç‰¹åˆ©å°”|æ¸©å“¥å|CA|Canada|Toronto|Montreal|Vancouver),ğŸ‡¨ğŸ‡¦
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å¾·å›½|æ³•å…°å…‹ç¦|æŸæ—|DE|Germany|Frankfurt|Berlin),ğŸ‡©ğŸ‡ª
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ³•å›½|å·´é»|FR|France|Paris),ğŸ‡«ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(éŸ©å›½|é¦–å°”|KR|Korea|South Korea|Seoul),ğŸ‡°ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ¾³å¤§åˆ©äºš|æ‚‰å°¼|å¢¨å°”æœ¬|AU|Australia|Sydney|Melbourne),ğŸ‡¦ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¿„ç½—æ–¯|è«æ–¯ç§‘|åœ£å½¼å¾—å ¡|RU|Russia|Moscow|Saint Petersburg),ğŸ‡·ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¸­å›½|æ·±åœ³|åŒ—äº¬|ä¸Šæµ·|å¹¿ä¸œ|å±±ä¸œ|æ¹–åŒ—|æ¹–å—|å¤©æ´¥|é‡åº†|è¾½å®|å‰æ—|é»‘é¾™æ±Ÿ|æ±Ÿè‹|æµ™æ±Ÿ|å®‰å¾½|ç¦å»º|äº‘å—|å››å·|é™•è¥¿|å±±è¥¿|ç”˜è‚ƒ|é’æµ·|å†…è’™å¤|è¥¿è—|å®å¤|æ–°ç–†|CN|China|Shenzhen|Beijing|Shanghai|Guangdong|Shandong|Hubei|Hunan|Tianjin|Chongqing|Liaoning|Jilin|Heilongjiang|Jiangsu|Zhejiang|Anhui|Fujian|Yunnan|Sichuan|Shaanxi|Shanxi|Gansu|Qinghai|Inner Mongolia|Tibet|Ningxia|Xinjiang),ğŸ‡¨ğŸ‡³
emoji=^(?!.*([ğŸ‡¦-ğŸ‡¿]{2}|â„¹ï¸)).*(å®˜.?ç½‘|å®˜æ–¹|äº§å“|å¹³å°|å‹¿è¿|ä¿®å¤|æ¢å¤|æ›´æ–°|åœ°å€|ç½‘ç«™|ç½‘å€|åŸŸå|ç½‘åŸŸ|æµè§ˆå™¨|å¯¼èˆª|æœ|ç¾¤|è£™|èŠ|é¢‘é“|ç”µæŠ¥|é£æœº|æ‰£|å¾®ä¿¡|å”®å|å®¢æœ|å·¥å•|è”ç³»|ä½¿ç”¨|è´­ä¹°|ç»­è´¹|è®¢é˜…|å…¬å‘Š|ç‰ˆæœ¬|å‡ºç°|æ²¡ç½‘|æƒ…å†µ|å¼€é€š|æ•°é‡|æ³¨|è¯´æ˜|é€šçŸ¥|å»é™¤|è¿‡æ»¤|@|ï¼š|(?i:(?<![\da-z])(tg|telegram|t\.me|qq?|vx?|wx)(?!\d*[a-z]|\d{1,3}(?!\d))|^[^:]+:(?![\da-f]{0,4}:|\s*\d{1,5}([/?]|\s*$)))),â„¹ï¸

# è®¢é˜…æ›´æ–°è®¾ç½®
auto_update=true
update_interval=24
# ========== åŸºç¡€è®¾ç½®ç»“æŸ ==========

# ========== ä»£ç†åˆ†ç»„é…ç½® - å®‰å“è®¾å¤‡ä¼˜åŒ– ==========
# åŸºç¡€ä»£ç†ç­–ç•¥ç»„
custom_proxy_group=âœˆï¸èµ·é£`select`[]âš¡ä½å»¶è¿Ÿ`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š`[]DIRECT`[]REJECT
custom_proxy_group=ğŸ‘†ğŸ»æŒ‡å®š`select`.*
custom_proxy_group=ğŸ›©ï¸å¢™å†…`select`[]DIRECT`[]âœˆï¸èµ·é£
custom_proxy_group=ğŸŸæ¼ç½‘ä¹‹é±¼`select`[]âœˆï¸èµ·é£`[]DIRECT`[]ğŸ›©ï¸å¢™å†…`[]ğŸ‘†ğŸ»æŒ‡å®š

# è‡ªåŠ¨æµ‹è¯•ç­–ç•¥ç»„
custom_proxy_group=âš¡ä½å»¶è¿Ÿ`url-test`.*`https://www.gstatic.com/generate_204`150,,30
custom_proxy_group=ğŸ‡­ğŸ‡°é¦™æ¸¯`url-test`(?i)(^(?=.*æ¸¯)|^(?=.*hk)|^(?=.*hong)|^(?=.*kong)).*`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`url-test`(?i)(^(?=.*æ–°åŠ å¡)|^(?=.*ç‹®åŸ)|^(?=.*sg)|^(?=.*singapore)).*`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¯ğŸ‡µæ—¥æœ¬`url-test`(?i)(^(?=.*æ—¥æœ¬)|^(?=.*jp)|^(?=.*japan)|^(?=.*tokyo)|^(?=.*osaka)|^(?=.*ä¸œäº¬)|^(?=.*å¤§é˜ª)).*`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡ºğŸ‡¸ç¾å›½`url-test`(?i)(^(?=.*ç¾å›½)|^(?=.*us)|^(?=.*states)|^(?=.*america)).*`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¹ğŸ‡¼å°æ¹¾`url-test`(?i)(^(?=.*å°æ¹¾)|^(?=.*tw)|^(?=.*taiwan)).*`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸå…¶ä»–`select`^(?!.*(é¦™æ¸¯|å°æ¹¾|æ–°åŠ å¡|æ—¥æœ¬|ç¾å›½|ç‹®åŸ|hk|hong|kong|tw|taiwan|sg|singapore|jp|japan|us|states|america|tokyo|osaka)).*$

# æµ·å¤–æœåŠ¡ç­–ç•¥ç»„
custom_proxy_group=ğŸ›¡ï¸GoogleæœåŠ¡`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ“²ç¤¾äº¤åª’ä½“`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ¬æµåª’ä½“`select`[]âœˆï¸èµ·é£`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ¤–AIæœåŠ¡`select`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]âœˆï¸èµ·é£`[]ğŸ‘†ğŸ»æŒ‡å®š

# å›½å†…æœåŠ¡ç­–ç•¥ç»„
custom_proxy_group=ğŸ’¬ç¤¾äº¤èŠå¤©`select`[]DIRECT`[]ğŸ›©ï¸å¢™å†…`[]âœˆï¸èµ·é£
custom_proxy_group=ğŸ“±çŸ­è§†é¢‘`select`[]DIRECT`[]ğŸ›©ï¸å¢™å†…`[]âœˆï¸èµ·é£
custom_proxy_group=ğŸ›’è´­ç‰©å¹³å°`select`[]DIRECT`[]ğŸ›©ï¸å¢™å†…
custom_proxy_group=ğŸ¦é‡‘èç†è´¢`select`[]DIRECT`[]ğŸ›©ï¸å¢™å†…
custom_proxy_group=ğŸ—ºï¸åœ°å›¾å‡ºè¡Œ`select`[]DIRECT`[]ğŸ›©ï¸å¢™å†…
custom_proxy_group=ğŸ“Šå›½å†…åº”ç”¨`select`[]DIRECT`[]ğŸ›©ï¸å¢™å†…`[]âœˆï¸èµ·é£

# ç‰¹æ®Šç­–ç•¥ç»„
custom_proxy_group=ğŸ’©å¹¿å‘Šæ‹¦æˆª`select`[]REJECT`[]DIRECT`[]âœˆï¸èµ·é£
custom_proxy_group=ğŸ”’éšç§ä¿æŠ¤`select`[]REJECT`[]âœˆï¸èµ·é£`[]DIRECT

# ========== åˆ†æµè§„åˆ™é…ç½® - å®‰å“è®¾å¤‡ä¼˜åŒ– ==========
# åŸºç¡€å®‰å…¨è§„åˆ™
ruleset=DIRECT,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/private.txt
ruleset=DIRECT,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Lan/Lan.yaml

# å¹¿å‘Šä¸éšç§ä¿æŠ¤è§„åˆ™
ruleset=ğŸ’©å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanAD.list
ruleset=ğŸ’©å¹¿å‘Šæ‹¦æˆª,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite.yaml
ruleset=ğŸ”’éšç§ä¿æŠ¤,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list
ruleset=ğŸ”’éšç§ä¿æŠ¤,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Privacy.list

# å›½å†…åº”ç”¨ä¸æœåŠ¡è§„åˆ™
ruleset=ğŸ’¬ç¤¾äº¤èŠå¤©,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.yaml
ruleset=ğŸ’¬ç¤¾äº¤èŠå¤©,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/DouYin/DouYin.yaml
ruleset=ğŸ“±çŸ­è§†é¢‘,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bilibili/Bilibili.yaml
ruleset=ğŸ“±çŸ­è§†é¢‘,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.yaml
ruleset=ğŸ¦é‡‘èç†è´¢,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AliPay/AliPay.yaml
ruleset=ğŸ¦é‡‘èç†è´¢,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChatPay/WeChatPay.yaml
ruleset=ğŸ›’è´­ç‰©å¹³å°,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/JingDong/JingDong.yaml
ruleset=ğŸ›’è´­ç‰©å¹³å°,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PinDuoDuo/PinDuoDuo.yaml
ruleset=ğŸ›’è´­ç‰©å¹³å°,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Taobao/Taobao.yaml
ruleset=ğŸ“Šå›½å†…åº”ç”¨,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/DingTalk/DingTalk.yaml
ruleset=ğŸ—ºï¸åœ°å›¾å‡ºè¡Œ,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GaoDe/GaoDe.yaml
ruleset=ğŸ—ºï¸åœ°å›¾å‡ºè¡Œ,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/DiDi/DiDi.yaml

# å›½é™…æœåŠ¡è§„åˆ™
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram_Resolve.yaml
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.yaml
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.yaml
ruleset=ğŸ¬æµåª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
ruleset=ğŸ›¡ï¸GoogleæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
ruleset=ğŸ›¡ï¸GoogleæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GoogleDrive/GoogleDrive.yaml
ruleset=ğŸ›¡ï¸GoogleæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GooglePlay/GooglePlay.yaml
ruleset=ğŸ¤–AIæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
ruleset=ğŸ¤–AIæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.yaml
ruleset=ğŸ¤–AIæœåŠ¡,https://raw.githubusercontent.com/juewuy/ShellClash/master/rules/ai.list

# é›†åˆè§„åˆ™
ruleset=ğŸ“Šå›½å†…åº”ç”¨,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.yaml
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SocialMedia/SocialMedia.yaml
ruleset=ğŸ¬æµåª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/StreamingMedia/StreamingMedia.yaml

# å…¨å±€è§„åˆ™
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/direct.txt
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/gfw.txt
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/greatfire.txt
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/proxy.txt
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/tld-not-cn.txt
ruleset=ğŸ›©ï¸å¢™å†…,[]GEOIP,CN,no-resolve
ruleset=ğŸŸæ¼ç½‘ä¹‹é±¼,[]FINAL

# ========== Clashæ ¸å¿ƒé…ç½® - ä¸­å›½å¤§é™†å®‰å“è®¾å¤‡ä¸“ç”¨ä¼˜åŒ– ==========
mixed-port: 7890
allow-lan: true
bind-address: '*'
mode: rule
log-level: silent
ipv6: false
external-controller: 127.0.0.1:9090
profile:
  store-selected: true
  store-fake-ip: true
  tracing: false  # ç¦ç”¨è¿½è¸ªåŠŸèƒ½ï¼Œé™ä½ç”µé‡æ¶ˆè€—

# å®‰å“è®¾å¤‡ç”µæ± ä¼˜åŒ–
unified-delay: true
tcp-concurrent: true
keep-alive-interval: 180  # è¿›ä¸€æ­¥å¢åŠ ä¿æ´»é—´éš”è‡³180ç§’ï¼Œæœ€å¤§åŒ–çœç”µ
find-process-mode: off   # ç¦ç”¨è¿›ç¨‹æŸ¥æ‰¾ï¼Œé¿å…é¢å¤–CPUä½¿ç”¨
interface-name: ${networkInterface}  # è‡ªåŠ¨é€‚é…å½“å‰ç½‘ç»œæ¥å£

# å®‰å“è®¾å¤‡ç½‘ç»œä¼˜åŒ–çš„å—…æ¢é…ç½®
sniffer:
  enable: true
  override-destination: true  # å¢å¼ºæµé‡è¯†åˆ«å‡†ç¡®æ€§
  force-dns-mapping: true     # å¼ºåˆ¶DNSæ˜ å°„ï¼Œå‡å°‘æ³„éœ²é£é™©
  parse-pure-ip: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080]
    QUIC:
      ports: [443, 8443]  # æ”¯æŒQUICåè®®å—…æ¢
  skip-domain:
    - '*.alipay.com'  # æ”¯ä»˜å®
    - '*.taobao.com'  # æ·˜å®
    - '*.qq.com'      # QQ
    - '*.weixin.qq.com'  # å¾®ä¿¡
    - '+.baidu.com'   # ç™¾åº¦
    - '+.umeng.com'   # å‹ç›Ÿç»Ÿè®¡
    - '+.umengcloud.com'
    - '+.jpush.cn'    # æå…‰æ¨é€
    - '+.getui.com'   # ä¸ªæ¨
    - '+.jiguang.cn'  # æå…‰
    - '+.qlogo.cn'    # QQå›¾ç‰‡
    - '+.gtimg.cn'    # è…¾è®¯å›¾ç‰‡
    - '+.weixin.qq.com'  # å¾®ä¿¡æœåŠ¡
    - '+.qpic.cn'     # QQå›¾ç‰‡
    - '+.10086.cn'    # ä¸­å›½ç§»åŠ¨
    - '+.10010.com'   # ä¸­å›½è”é€š
    - '+.189.cn'      # ä¸­å›½ç”µä¿¡
    - '*.cm.jd.com'   # äº¬ä¸œ
    - '*.jd.com'      # äº¬ä¸œ
    - '*.pinduoduo.com'  # æ‹¼å¤šå¤š
    - '+.xiaomi.com'  # å°ç±³æœåŠ¡
    - '+.mi.com'      # å°ç±³æœåŠ¡
    - '+.oppo.com'    # OPPOæœåŠ¡
    - '+.vivo.com'    # vivoæœåŠ¡
    - '+.huawei.com'  # åä¸ºæœåŠ¡

# å®‰å“è®¾å¤‡TUNä¼˜åŒ–
tun:
  enable: true
  stack: system  # ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©æœ€ä½³å †æ ˆ
  auto-route: true
  auto-detect-interface: true
  mtu: 9000  # å¢å¤§MTUå€¼ï¼Œæé«˜ä¼ è¾“æ•ˆç‡
  dns-hijack:
    - 'any:53'
    - '8.8.8.8:53'    # æ‹¦æˆªè°·æ­ŒDNSè¯·æ±‚
    - '1.1.1.1:53'    # æ‹¦æˆªCloudflare DNSè¯·æ±‚
    - '114.114.114.114:53'  # æ‹¦æˆª114DNSè¯·æ±‚
    - '223.5.5.5:53'  # æ‹¦æˆªé˜¿é‡ŒDNSè¯·æ±‚
    - '119.29.29.29:53'  # æ‹¦æˆªè…¾è®¯DNSè¯·æ±‚

# å®‰å“è®¾å¤‡çœç”µDNSé…ç½®
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - 'stun.*.*'
    - 'stun.*.*.*'
    - '+.msftncsi.com'
    - '+.msftconnecttest.com'
    - '+.steamcontent.com'
    - '+.cmpassport.com'    # è¿è¥å•†ä¸€é”®ç™»å½•
    - '+.10086.cn'          # ä¸­å›½ç§»åŠ¨
    - '+.jegotrip.com.cn'   # ä¸­å›½ç§»åŠ¨æœåŠ¡
    - '+.icitymobile.mobi'  # ä¸­å›½ç§»åŠ¨æœåŠ¡
    - '+.weixin.qq.com'     # å¾®ä¿¡æœåŠ¡
    - '+.mpush-api.aliyun.com'  # é˜¿é‡Œäº‘æ¨é€
    - '+.pay.weixin.qq.com'  # å¾®ä¿¡æ”¯ä»˜
    - 'lens.l.google.com'   # è°·æ­Œæ™ºèƒ½é•œå¤´
    - 'stun.l.google.com'   # è°·æ­ŒSTUNæœåŠ¡
    - 'time.*.com'          # æ—¶é—´æœåŠ¡
    - 'time.*.gov'
    - 'time.*.edu.cn'
    - 'ntp.*.*'             # NTPæœåŠ¡
    - 'ntp.*.*.*'
    - '+.gvt1.com'          # å®‰å“è°·æ­ŒæœåŠ¡
    - '+.gcloudflarecdnprovider.com'  # å®‰å“è°·æ­ŒæœåŠ¡CDN
    - '+.android.com'       # å®‰å“ç³»ç»Ÿæ›´æ–°
    - '+.app-measurement.com'  # è°·æ­Œåˆ†ææœåŠ¡
    - '+.firebase*.com'     # Firebaseæ¨é€

  # é«˜æ•ˆçœç”µçš„DNSæœåŠ¡å™¨é…ç½® - å®‰å“ä¼˜åŒ–
  nameserver:
    - https://dns.alidns.com/dns-query  # é˜¿é‡ŒåŠ å¯†DNS (ä¸»åŠ›)
    - h3://223.5.5.5/dns-query         # é˜¿é‡ŒH3åŠ å¯†DNS (æ›´çœç”µ)
    - 223.5.5.5                        # é˜¿é‡Œæ™®é€šDNS (å¤‡ç”¨)
    - 119.29.29.29                     # è…¾è®¯DNS (å¤‡ç”¨)

  # å›½é™…åŸŸåä¼˜åŒ–è§£æ
  fallback:
    - https://dns.google/dns-query      # è°·æ­ŒDoH (ä¸»åŠ›)
    - h3://8.8.8.8/dns-query           # è°·æ­ŒH3 (æ›´çœç”µ)
    - tls://1.1.1.1:853                # Cloudflare (å¤‡ç”¨)

  # æ™ºèƒ½DNSåˆ†æµæ§åˆ¶ - å®‰å“å¸¸ç”¨åŸŸåä¼˜åŒ–
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
      - '+.github.com'
      - '+.twitter.com'
      - '+.instagram.com'
      - '+.netflix.com'
      - '+.telegram.org'
      - '+.discord.com'
      - '+.reddit.com'
      - '+.wikipedia.org'
      - '+.spotify.com'
      - '+.github.io'
      - '+.play.google.com'  # Google Playå•†åº—
      - '+.android.clients.google.com'  # å®‰å“ç³»ç»ŸæœåŠ¡
      - '+.gvt1.com'  # è°·æ­Œå®‰å“æœåŠ¡

  # å®‰å…¨ä¿åº•DNS
  default-nameserver:
    - 223.5.5.5       # é˜¿é‡ŒDNS
    - 119.29.29.29    # è…¾è®¯DNS

# å®‰å“è®¾å¤‡ç½‘ç»œæ€§èƒ½ä¼˜åŒ–
url-test-interval: 14400  # 4å°æ—¶æµ‹è¯•ä¸€æ¬¡ï¼Œæœ€å¤§é™åº¦èŠ‚çœç”µé‡
test-timeout: 2           # ç¼©çŸ­æµ‹è¯•è¶…æ—¶æ—¶é—´
tolerance: 200            # å¢å¤§å®¹å·®å€¼ï¼Œå‡å°‘åˆ‡æ¢é¢‘ç‡
connection-test-url: https://www.gstatic.com/generate_204  # ç»Ÿä¸€æµ‹è¯•é“¾æ¥
proxy-test-url: https://www.gstatic.com/generate_204  # ç»Ÿä¸€æµ‹è¯•é“¾æ¥

# å®‰å“è®¾å¤‡çœç”µä¼˜åŒ–
global-client-fingerprint: chrome  # å›ºå®šæŒ‡çº¹æ›´çœç”µ
tcp-connection-reuse: true  # é‡ç”¨TCPè¿æ¥
disable-udp-ports: [1900, 5353]  # ç¦ç”¨å¸¸è§çš„MDNS/SSDPç­‰è€—ç”µæœåŠ¡ç«¯å£

# å®‰å“ç½‘ç»œç‰¹å®šä¼˜åŒ– (æ ¸å¿ƒé…ç½®å‚æ•°)
geodata-mode: false  # ç¦ç”¨èµ„æºå¯†é›†å‹åœ°ç†æ•°æ®åŠ è½½
geodata-loader: memconservative  # ä¿å®ˆå†…å­˜ä½¿ç”¨
tcp-fast-open: true  # å¯ç”¨TCPå¿«é€Ÿæ‰“å¼€
udp-relay-mode: direct  # ç›´è¿æ¨¡å¼UDPä¸­ç»§

# é«˜çº§DNSå®‰å…¨è®¾ç½®
force-domain: true      # å¼ºåˆ¶åŸŸåè§£æ
enable-domain-routing: true  # å¯ç”¨åŸŸåè·¯ç”±
routing-domain-resolve: true # åŸŸåè§£æè·¯ç”±
encrypted-dns-routing: true  # åŠ å¯†DNSè·¯ç”±
domain-strategy: ipv4-only   # ä»…ä½¿ç”¨IPv4ï¼ŒèŠ‚çœç”µé‡
