# é’ˆå¯¹ä¸­å›½å¤§é™†ç§»åŠ¨æ‰‹æœºèœ‚çªæ•°æ®ç½‘ç»œä¼˜åŒ–çš„Metaå†…æ ¸é…ç½®æ–‡ä»¶
[custom]

# åŸºç¡€è®¾ç½®
exclude_remarks=(Data Left|Remain:|Traffic:|Expir[ey]|Reset|(\d[\d.]*\s*[MG]B[^\dA-Za-z]+|[:ï¼š]\s*)\d[\d.]*\s*GB(?![\dA-Za-z])|å‰©[ä½™é¤˜]æµé‡|æµé‡ï¼š|[åˆ°è¿‡éæ•ˆ]æœŸ|[æ—¶æ™‚][é—´é–“]|é‡ç½®|åˆ†å‰²çº¿|æ®‹ã‚Šä½¿ç”¨å®¹é‡|æœ‰åŠ¹æœŸé™|ãƒªã‚»ãƒƒãƒˆ|ğŸ”° (ID|HSD|SNI):|ğŸ“ GÃ³i:)

# Emoji è®¾ç½®
add_emoji=true
remove_old_emoji=true
emoji=(?!ğŸ‡¨ğŸ‡³)[ğŸ‡¦-ğŸ‡¿]{2},
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ç¾å›½|åç››é¡¿|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ—§é‡‘å±±|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|çº½çº¦|ä¸¹ä½›|åŠ åˆ©ç¦å°¼äºš|å¼—å‰å°¼äºš|å¾—å…‹è¨æ–¯|äºšç‰¹å…°å¤§|ä½›ç½—é‡Œè¾¾|è¿ˆé˜¿å¯†|US|USA|United States|Washington|Portland|Dallas|Oregon|Phoenix|Fremont|Silicon Valley|San Francisco|Las Vegas|Los Angeles|San Jose|Santa Clara|Seattle|Chicago|New York|Denver|California|Virginia|Texas|Atlanta|Florida|Miami),ğŸ‡ºğŸ‡¸
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(é¦™æ¸¯|HK|Hong Kong),ğŸ‡­ğŸ‡°
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|åå¤å±‹|åŸ¼ç‰|ç¦å†ˆ|JP|Japan|Tokyo|Osaka|Nagoya|Saitama|Fukuoka),ğŸ‡¯ğŸ‡µ
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ–°åŠ å¡|ç‹®åŸ|SG|Singapore),ğŸ‡¸ğŸ‡¬
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å°æ¹¾|å°åŒ—|æ–°åŒ—|å½°åŒ–|é«˜é›„|TW|Taiwan|Taipei|New Taipei|Changhua|Kaohsiung),ğŸ‡¹ğŸ‡¼
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(è‹±å›½|è‹±æ ¼å…°|ä¼¦æ•¦|æ›¼å½»æ–¯ç‰¹|UK|United Kingdom|England|London|Manchester),ğŸ‡¬ğŸ‡§
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(åŠ æ‹¿å¤§|å¤šä¼¦å¤š|è’™ç‰¹åˆ©å°”|æ¸©å“¥å|CA|Canada|Toronto|Montreal|Vancouver),ğŸ‡¨ğŸ‡¦
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å¾·å›½|æ³•å…°å…‹ç¦|æŸæ—|DE|Germany|Frankfurt|Berlin),ğŸ‡©ğŸ‡ª
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ³•å›½|å·´é»|FR|France|Paris),ğŸ‡«ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(éŸ©å›½|é¦–å°”|KR|Korea|South Korea|Seoul),ğŸ‡°ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ¾³å¤§åˆ©äºš|æ‚‰å°¼|å¢¨å°”æœ¬|AU|Australia|Sydney|Melbourne),ğŸ‡¦ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¿„ç½—æ–¯|è«æ–¯ç§‘|åœ£å½¼å¾—å ¡|RU|Russia|Moscow|Saint Petersburg),ğŸ‡·ğŸ‡º
emoji=^(?!.*([ğŸ‡¦-ğŸ‡¿]{2}|â„¹ï¸)).*(å®˜.?ç½‘|å®˜æ–¹|äº§å“|å¹³å°|å‹¿è¿|ä¿®å¤|æ¢å¤|æ›´æ–°|åœ°å€|ç½‘ç«™|ç½‘å€|åŸŸå|ç½‘åŸŸ|æµè§ˆå™¨|å¯¼èˆª|æœ|ç¾¤|è£™|èŠ|é¢‘é“|ç”µæŠ¥|é£æœº|æ‰£|å¾®ä¿¡|å”®å|å®¢æœ|å·¥å•|è”ç³»|ä½¿ç”¨|è´­ä¹°|ç»­è´¹|è®¢é˜…|å…¬å‘Š|ç‰ˆæœ¬|å‡ºç°|æ²¡ç½‘|æƒ…å†µ|å¼€é€š|æ•°é‡|æ³¨|è¯´æ˜|é€šçŸ¥|å»é™¤|è¿‡æ»¤|@|ï¼š|(?i:(?<![\da-z])(tg|telegram|t\.me|qq?|vx?|wx)(?!\d*[a-z]|\d{1,3}(?!\d))|^[^:]+:(?![\da-f]{0,4}:|\s*\d{1,5}([/?]|\s*$)))),â„¹ï¸

enable_rule_generator=true
overwrite_original_rules=true

# ä»£ç†åˆ†ç»„ - Metaå†…æ ¸æ”¯æŒçš„æ ¼å¼
custom_proxy_group=ğŸš€ä»£ç†`select`[]âš¡ä½å»¶è¿Ÿ`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸŒå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š`[]DIRECT`[]REJECT
custom_proxy_group=ğŸ‘†ğŸ»æŒ‡å®š`select`.*
custom_proxy_group=âš¡ä½å»¶è¿Ÿ`url-test`.*`https://cp.cloudflare.com/generate_204`900,,180
custom_proxy_group=ğŸ‡­ğŸ‡°é¦™æ¸¯`url-test`(?i)(?=.*(æ¸¯|HK|Hong))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|GAME)).*`https://cp.cloudflare.com/generate_204`900,,180
custom_proxy_group=ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`url-test`(?i)(?=.*(æ–°|ç‹®|ç…|SG|Singapore))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|GAME)).*`https://cp.cloudflare.com/generate_204`900,,180
custom_proxy_group=ğŸ‡¯ğŸ‡µæ—¥æœ¬`url-test`(?i)(?=.*(æ—¥|JP|Japan))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|GAME)).*`https://cp.cloudflare.com/generate_204`900,,180
custom_proxy_group=ğŸ‡ºğŸ‡¸ç¾å›½`url-test`(?i)(?=.*(ç¾|US|United States))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|GAME)).*`https://cp.cloudflare.com/generate_204`900,,180
custom_proxy_group=ğŸ‡¹ğŸ‡¼å°æ¹¾`url-test`(?i)(?=.*(å°|TW|Taiwan))(?!.*(å›å›½|æ ¡å›­|æ¸¸æˆ|GAME)).*`https://cp.cloudflare.com/generate_204`900,,180
custom_proxy_group=ğŸŒå…¶ä»–`select`^(?!.*(æ¸¯|HK|Hong|å°|TW|Taiwan|æ—¥|JP|Japan|æ–°|ç‹®|ç…|SG|Singapore|ç¾|US|United States|å›å›½|æ ¡å›­|æ¸¸æˆ|GAME)).*$

# åº”ç”¨åˆ†ç»„
custom_proxy_group=ğŸŒå›½é™…`select`[]ğŸš€ä»£ç†`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸŒå…¶ä»–
custom_proxy_group=ğŸ“±ç¤¾äº¤èŠå¤©`select`[]DIRECT`[]ğŸš€ä»£ç†`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡ºğŸ‡¸ç¾å›½
custom_proxy_group=ğŸ¬æµåª’ä½“`select`[]ğŸš€ä»£ç†`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸŒå…¶ä»–
custom_proxy_group=ğŸ‡¨ğŸ‡³ç›´è¿`select`[]DIRECT`[]ğŸš€ä»£ç†
custom_proxy_group=ğŸ“±çŸ­è§†é¢‘`select`[]DIRECT`[]ğŸš€ä»£ç†
custom_proxy_group=ğŸ®æ¸¸æˆç›´æ’­`select`[]DIRECT`[]ğŸš€ä»£ç†
custom_proxy_group=ğŸ›’è´­ç‰©å¹³å°`select`[]DIRECT`[]ğŸš€ä»£ç†
custom_proxy_group=ğŸ“¢å¹¿å‘Šéšç§`select`[]REJECT`[]DIRECT`[]ğŸš€ä»£ç†
custom_proxy_group=ğŸ æ¼ç½‘ä¹‹é±¼`select`[]ğŸš€ä»£ç†`[]DIRECT`[]ğŸ‘†ğŸ»æŒ‡å®š

# åˆ†æµè§„åˆ™
ruleset=DIRECT,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/LocalAreaNetwork.list
# é‡è¦çš„å›½å†…æœåŠ¡ä¼˜å…ˆåŒ¹é…
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/UnionPay.list
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/AliPay.list
ruleset=ğŸ“±ç¤¾äº¤èŠå¤©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/WeChat.list
ruleset=ğŸ“±ç¤¾äº¤èŠå¤©,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Tencent.list
# çŸ­è§†é¢‘å’Œè´­ç‰©é«˜é¢‘åº”ç”¨æå‰åŒ¹é…
ruleset=ğŸ“±çŸ­è§†é¢‘,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/DouYin.list
ruleset=ğŸ›’è´­ç‰©å¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/JingDong.list
ruleset=ğŸ›’è´­ç‰©å¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Taobao.list
ruleset=ğŸ›’è´­ç‰©å¹³å°,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/PDD.list
# å¹¿å‘Šè¿‡æ»¤
ruleset=ğŸ“¢å¹¿å‘Šéšç§,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyListChina.list
ruleset=ğŸ“¢å¹¿å‘Šéšç§,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/BanEasyPrivacy.list
# æ¸¸æˆç›´æ’­
ruleset=ğŸ®æ¸¸æˆç›´æ’­,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Douyu.list
ruleset=ğŸ®æ¸¸æˆç›´æ’­,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/HuYa.list
ruleset=ğŸ®æ¸¸æˆç›´æ’­,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.yaml
# å›½å†…æœåŠ¡
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Alibaba/Alibaba_Classical.yaml
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ByteDance/ByteDance_Classical.yaml
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Baidu/Baidu_Classical.yaml
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list
# å›½é™…æœåŠ¡
ruleset=ğŸŒå›½é™…,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Google.list
ruleset=ğŸŒå›½é™…,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Telegram.list
ruleset=ğŸŒå›½é™…,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Twitter.list
ruleset=ğŸ¬æµåª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/YouTube.list
ruleset=ğŸ¬æµåª’ä½“,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyMedia.list
# åŸºç¡€åˆ†æµè§„åˆ™
ruleset=ğŸš€ä»£ç†,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
# ç›´è¿è§„åˆ™æ”¾åˆ°æœ€å
ruleset=DIRECT,https://raw.githubusercontent.com/zsokami/ACL4SSR/main/ChinaOnly.list
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaDomain.list
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,[]GEOIP,LAN,no-resolve
ruleset=ğŸ‡¨ğŸ‡³ç›´è¿,[]GEOIP,CN,no-resolve
ruleset=ğŸ æ¼ç½‘ä¹‹é±¼,[]FINAL

# TUNé…ç½®
tun:
  enable: true
  stack: system
  dns-hijack:
    - 'any:53'
  auto-route: true
  auto-detect-interface: true
  mtu: 1280
  endpoint-independent-nat: true

# DNS é…ç½® - èœ‚çªç½‘ç»œä¼˜åŒ–
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - '*.local'
    - 'localhost.ptlogin2.qq.com'
    - 'dns.msftncsi.com'
    - 'www.msftncsi.com'
    - 'www.msftconnecttest.com'

  # å›½å†…DNS (ä¼˜åŒ–é¡ºåº)
  nameserver:
    - 223.5.5.5     # é˜¿é‡ŒDNS
    - 119.29.29.29  # è…¾è®¯DNSå¤‡ç”¨

  # å›½å¤–DNS (ä¼˜åŒ–é¡ºåº)
  fallback:
    - https://dns.google/dns-query     # è°·æ­ŒDNS
    - https://cloudflare-dns.com/dns-query # Cloudflareå¤‡ç”¨

  # åˆ†æµè®¾ç½®
  fallback-filter:
    geoip: true  # ä½¿ç”¨GEOIPæ•°æ®åˆ¤æ–­
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 127.0.0.1/8
      - 0.0.0.0/32
    # å¼ºåˆ¶è¿™äº›åŸŸåä½¿ç”¨åŠ å¯†DNSè§£æ
    domain:
      - '+.google.com'
      - '+.facebook.com'
      - '+.youtube.com'
      - '+.twitter.com'
      - '+.instagram.com'
      - '+.netflix.com'
      - '+.telegram.org'
      - '+.github.com'
      - '+.reddit.com'
      - '+.wikipedia.org'
      - '+.cloudflare.com'
      - '+.discord.com'
      - '+.spotify.com'
      - '+.twitch.tv'
      - '+.amazon.com'
      - '+.github.io'
      - '+.medium.com'
      - '+.bing.com'
      - '+.microsoft.com'

  # é˜²æ­¢DNSæ±¡æŸ“
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29

  # DNSç¼“å­˜è®¾ç½®
  caching: true
  cache-size: 2048

# åœ°ç†æ•°æ®æ–‡ä»¶é…ç½® - é’ˆå¯¹ä¸­å›½å¤§é™†ä¼˜åŒ–
geox-url:
  geoip: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat"
  geosite: "https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  mmdb: "https://github.com/Loyalsoldier/clash-rules/releases/download/release/Country.mmdb"

geodata-mode: true
geodata-loader: memconservative
geoip-maxmind-compatibility: true

# Metaå†…æ ¸ç½‘ç»œä¼˜åŒ– (å·²éªŒè¯æ”¯æŒ)
unified-delay: true
tcp-concurrent: true
tcp-no-delay: true
keep-alive-interval: 30  # é™ä½åˆ°30ç§’ï¼Œæ›´é€‚åˆèœ‚çªç½‘ç»œ
udp-relay-mode: native   # æ›´é€‚åˆä¸­å›½ç§»åŠ¨ç½‘ç»œçš„UDPä¸­ç»§æ¨¡å¼

# ç½‘ç»œå—…æ¢é…ç½® (Metaæ ¸å¿ƒç‰¹æ€§)
sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080]
  force-domain:
    - '+.google.com'
  skip-domain:
    - '+.qq.com'
    - '+.126.com'

# èœ‚çªç½‘ç»œæ€§èƒ½ä¼˜åŒ–
dial-context-timeout: 20
tcp-fast-open: true
udp-timeout: 10
find-process-mode: off

# æµé‡å’Œç”µæ± ä¼˜åŒ–
rules-update-interval: 86400
proxy-providers-update-interval: 86400

# è¿æ¥å¤±è´¥å¤„ç†
proxy-providers-health-check:
  enable: true
  timeout: 1000
  interval: 3600
  lazy: true
  check-count: 1
