[custom]

exclude_remarks=(Data Left|Remain:|Traffic:|Expir[ey]|Reset|(\d[\d.]*\s*[MG]B[^\dA-Za-z]+|[:ï¼š]\s*)\d[\d.]*\s*GB(?![\dA-Za-z])|å‰©[ä½™é¤˜]æµé‡|æµé‡ï¼š|[åˆ°è¿‡éæ•ˆ]æœŸ|[æ—¶æ™‚][é—´é–“]|é‡ç½®|åˆ†å‰²çº¿|æ®‹ã‚Šä½¿ç”¨å®¹é‡|æœ‰åŠ¹æœŸé™|ãƒªã‚»ãƒƒãƒˆ|ğŸ”° (ID|HSD|SNI):|ğŸ“ GÃ³i:)

add_emoji=true
remove_old_emoji=false
emoji=(?!ğŸ‡¨ğŸ‡³)[ğŸ‡¦-ğŸ‡¿]{2},
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ç¾å›½|åç››é¡¿|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ—§é‡‘å±±|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|çº½çº¦|ä¸¹ä½›|åŠ åˆ©ç¦å°¼äºš|å¼—å‰å°¼äºš|å¾—å…‹è¨æ–¯|äºšç‰¹å…°å¤§|ä½›ç½—é‡Œè¾¾|è¿ˆé˜¿å¯†|United States|Washington|Portland|Dallas|Oregon|Phoenix|Fremont|Silicon Valley|San Francisco|Las Vegas|Los Angeles|San Jose|Santa Clara|Seattle|Chicago|New York|Denver|California|Virginia|Texas|Atlanta|Florida|Miami),ğŸ‡ºğŸ‡¸
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(é¦™æ¸¯|Hong Kong),ğŸ‡­ğŸ‡°
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|åå¤å±‹|åŸ¼ç‰|ç¦å†ˆ|Japan|Tokyo|Osaka|Nagoya|Saitama|Fukuoka),ğŸ‡¯ğŸ‡µ
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ–°åŠ å¡|Singapore),ğŸ‡¸ğŸ‡¬
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å°æ¹¾|å°åŒ—|æ–°åŒ—|å½°åŒ–|é«˜é›„|Taiwan|Taipei|New Taipei|Changhua|Kaohsiung),ğŸ‡¹ğŸ‡¼
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(è‹±å›½|è‹±æ ¼å…°|ä¼¦æ•¦|æ›¼å½»æ–¯ç‰¹|United Kingdom|England|London|Manchester),ğŸ‡¬ğŸ‡§
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(åŠ æ‹¿å¤§|å¤šä¼¦å¤š|è’™ç‰¹åˆ©å°”|æ¸©å“¥å|Canada|Toronto|Montreal|Vancouver),ğŸ‡¨ğŸ‡¦
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(å¾·å›½|æ³•å…°å…‹ç¦|æŸæ—|Germany|Frankfurt|Berlin),ğŸ‡©ğŸ‡ª
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ³•å›½|å·´é»|France|Paris),ğŸ‡«ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(éŸ©å›½|é¦–å°”|South Korea|Seoul),ğŸ‡°ğŸ‡·
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(æ¾³å¤§åˆ©äºš|æ‚‰å°¼|å¢¨å°”æœ¬|Australia|Sydney|Melbourne),ğŸ‡¦ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¿„ç½—æ–¯|è«æ–¯ç§‘|åœ£å½¼å¾—å ¡|Russia|Moscow|Saint Petersburg),ğŸ‡·ğŸ‡º
emoji=^(?!.*[ğŸ‡¦-ğŸ‡¿]{2}).*(ä¸­å›½|æ·±åœ³|åŒ—äº¬|ä¸Šæµ·|å¹¿ä¸œ|å±±ä¸œ|æ¹–åŒ—|æ¹–å—|å¤©æ´¥|é‡åº†|è¾½å®|å‰æ—|é»‘é¾™æ±Ÿ|æ±Ÿè‹|æµ™æ±Ÿ|å®‰å¾½|ç¦å»º|äº‘å—|å››å·|é™•è¥¿|ç”˜è‚ƒ|é’æµ·|å†…è’™å¤|è¥¿è—|å®å¤|æ–°ç–†|China|Shenzhen|Beijing|Shanghai|Guangdong|Shandong|Hubei|Hunan|Tianjin|Chongqing|Liaoning|Jilin|Heilongjiang|Jiangsu|Zhejiang|Anhui|Fujian|Yunnan|Sichuan|Shaanxi|Gansu|Qinghai|Inner Mongolia|Tibet|Ningxia|Xinjiang),ğŸ‡¨ğŸ‡³
emoji=^(?!.*([ğŸ‡¦-ğŸ‡¿]{2}|â„¹ï¸)).*(å®˜.?ç½‘|å®˜æ–¹|äº§å“|å¹³å°|å‹¿è¿|ä¿®å¤|æ¢å¤|æ›´æ–°|åœ°å€|ç½‘ç«™|ç½‘å€|åŸŸå|ç½‘åŸŸ|æµè§ˆå™¨|å¯¼èˆª|æœ|ç¾¤|è£™|èŠ|é¢‘é“|ç”µæŠ¥|é£æœº|æ‰£|å¾®ä¿¡|å”®å|å®¢æœ|å·¥å•|è”ç³»|ä½¿ç”¨|è´­ä¹°|ç»­è´¹|è®¢é˜…|å…¬å‘Š|ç‰ˆæœ¬|å‡ºç°|æ²¡ç½‘|æƒ…å†µ|å¼€é€š|æ•°é‡|æ³¨|è¯´æ˜|é€šçŸ¥|å»é™¤|è¿‡æ»¤|@|ï¼š|(?i:(?<![\da-z])(tg|telegram|t\.me|qq?|vx?|wx)(?!\d*[a-z]|\d{1,3}(?!\d))|^[^:]+:(?![\da-f]{0,4}:|\s*\d{1,5}([/?]|\s*$)))),â„¹ï¸

enable_rule_generator=true
overwrite_original_rules=true

custom_proxy_group=âœˆï¸èµ·é£`select`[]âš¡ä½å»¶è¿Ÿ`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š`[]DIRECT`[]REJECT
custom_proxy_group=âš¡ä½å»¶è¿Ÿ`url-test`.*`https://www.gstatic.com/generate_204`180,,50
custom_proxy_group=ğŸ‘†ğŸ»æŒ‡å®š`select`.*

custom_proxy_group=ğŸ›©ï¸å¢™å†…`select`[]DIRECT`[]âœˆï¸èµ·é£
custom_proxy_group=ğŸ’©å¹¿å‘Š`select`[]REJECT`[]DIRECT`[]âœˆï¸èµ·é£

custom_proxy_group=ğŸ“ºBç«™`select`[]ğŸ›©ï¸å¢™å†…`[]DIRECT`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾
custom_proxy_group=ğŸ¬æµåª’ä½“`select`[]âœˆï¸èµ·é£`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ¬Netflix`select`[]ğŸ¬æµåª’ä½“`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ¬YouTube`select`[]ğŸ¬æµåª’ä½“`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½
custom_proxy_group=ğŸ“²ç¤¾äº¤åª’ä½“`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ“±ç”µæŠ¥`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]ğŸ‘†ğŸ»æŒ‡å®š

custom_proxy_group=ğŸ¤–AI`select`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]âœˆï¸èµ·é£`[]ğŸ‘†ğŸ»æŒ‡å®š
custom_proxy_group=ğŸ®æ¸¸æˆå¹³å°`select`[]âœˆï¸èµ·é£`[]DIRECT`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ›¡ï¸GoogleæœåŠ¡`select`[]âœˆï¸èµ·é£`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸå…¶ä»–`[]DIRECT
custom_proxy_group=â“‚ï¸å¾®è½¯æœåŠ¡`select`[]DIRECT`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬
custom_proxy_group=ğŸè‹¹æœæœåŠ¡`select`[]DIRECT`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬
custom_proxy_group=ğŸŸ¢Spotify`select`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]DIRECT`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ“§é‚®ä»¶æœåŠ¡`select`[]âœˆï¸èµ·é£`[]DIRECT`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸå…¶ä»–
custom_proxy_group=ğŸ”æœç´¢å¼•æ“`select`[]âœˆï¸èµ·é£`[]ğŸ‡ºğŸ‡¸ç¾å›½`[]ğŸ‡­ğŸ‡°é¦™æ¸¯`[]ğŸ‡¹ğŸ‡¼å°æ¹¾`[]ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`[]ğŸ‡¯ğŸ‡µæ—¥æœ¬`[]DIRECT
custom_proxy_group=ğŸŸæ¼ç½‘ä¹‹é±¼`select`[]âœˆï¸èµ·é£`[]ğŸ›©ï¸å¢™å†…`[]ğŸ’©å¹¿å‘Š`[]DIRECT`[]ğŸ‘†ğŸ»æŒ‡å®š

custom_proxy_group=ğŸ‡­ğŸ‡°é¦™æ¸¯`url-test`(?i)æ¸¯|hongkong|hk`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¹ğŸ‡¼å°æ¹¾`url-test`(?i)å°|taiwan|tw`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¸ğŸ‡¬æ–°åŠ å¡`url-test`(?i)æ–°|singapore|sg`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡¯ğŸ‡µæ—¥æœ¬`url-test`(?i)æ—¥|japan|jp`https://www.gstatic.com/generate_204`300,,50
custom_proxy_group=ğŸ‡ºğŸ‡¸ç¾å›½`url-test`(?i)ç¾|states|us`https://www.gstatic.com/generate_204`300,,150
custom_proxy_group=ğŸå…¶ä»–`url-test`^(?!.*(æ¸¯|å°|æ–°|æ—¥|ç¾|hongkong|hk|taiwan|tw|singapore|sg|japan|jp|states|us)).*$`https://www.gstatic.com/generate_204`300,,100

# å¹¿å‘Šè§„åˆ™ä¼˜å…ˆåŒ¹é…
ruleset=ğŸ’©å¹¿å‘Š,clash-domain:https://anti-ad.net/clash.yaml
ruleset=ğŸ’©å¹¿å‘Š,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/AdvertisingLite/AdvertisingLite.list
ruleset=DIRECT,clash-classic:https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.list

# ä¼˜å…ˆåŒ¹é…ç‰¹å®šåº”ç”¨å’ŒæœåŠ¡
ruleset=ğŸ“±ç”µæŠ¥,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/telegramcidr.txt
ruleset=ğŸ“±ç”µæŠ¥,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.list

# AIæœåŠ¡
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Claude/Claude.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Anthropic/Anthropic.list
ruleset=ğŸ¤–AI,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Perplexity/Perplexity.list

# å›½å†…æµåª’ä½“
ruleset=ğŸ“ºBç«™,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBiliIntl/BiliBiliIntl.list
ruleset=ğŸ“ºBç«™,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili.list

# å›½å¤–æµåª’ä½“
ruleset=ğŸ¬Netflix,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list
ruleset=ğŸ¬YouTube,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list
ruleset=ğŸ¬YouTube,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTubeMusic/YouTubeMusic.list
ruleset=ğŸŸ¢Spotify,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list
ruleset=ğŸ¬æµåª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.list

# ä¸»è¦æœåŠ¡æä¾›å•†
ruleset=ğŸ›¡ï¸GoogleæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.list
ruleset=ğŸè‹¹æœæœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list
ruleset=â“‚ï¸å¾®è½¯æœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list
ruleset=â“‚ï¸å¾®è½¯æœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bing/Bing.list
ruleset=ğŸ“§é‚®ä»¶æœåŠ¡,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Mail/Mail.list

# å¼€å‘ç›¸å…³
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitLab/GitLab.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Developer/Developer.list

# æ¸¸æˆå’Œæœç´¢
ruleset=ğŸ®æ¸¸æˆå¹³å°,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.list
ruleset=ğŸ”æœç´¢å¼•æ“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SearchEngine/SearchEngine.list

# ç¤¾äº¤åª’ä½“ï¼ˆç”µæŠ¥å·²å•ç‹¬åˆ—å‡ºï¼Œé¿å…é‡å¤ï¼‰
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitter/Twitter.list
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Instagram/Instagram.list
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Discord/Discord.list
ruleset=ğŸ“²ç¤¾äº¤åª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Tiktok/Tiktok.list

# åä½œå·¥å…·
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Slack/Slack.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Zoom/Zoom.list
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Notion/Notion.list

# å›½å†…ç›´è¿
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Mainland/Mainland.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SteamCN/SteamCN.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/WeChat/WeChat.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Tencent/Tencent.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Alibaba/Alibaba.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ByteDance/ByteDance.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs.list
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/direct.txt
ruleset=ğŸ›©ï¸å¢™å†…,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/cncidr.txt
ruleset=ğŸ›©ï¸å¢™å†…,[]GEOIP,CN,no-resolve

# å›½å¤–ç½‘ç«™
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/Loyalsoldier/clash-rules/master/proxy.txt
ruleset=âœˆï¸èµ·é£,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Global/Global.list

# å…œåº•è§„åˆ™
ruleset=ğŸŸæ¼ç½‘ä¹‹é±¼,[]FINAL

# Clashæ ¸å¿ƒé…ç½®
mixed-port: 10808
allow-lan: true
bind-address: '*'
mode: rule
log-level: warning
ipv6: false
external-controller: 127.0.0.1:9090
external-ui: dashboard
secret: ""

# TUNæ¨¡å¼é…ç½®
tun:
  enable: true
  stack: gvisor
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-detect-interface: true
  mtu: 1400
  tcp-balance: true
  udp-balance: true
  stack-buffer: 4096
  endpoint-independent-nat: true
  bypass:
    - 127.0.0.1/8
    - 169.254.0.0/16
    - 192.168.0.0/16
    - 10.0.0.0/8
    - 172.16.0.0/12
    - 192.0.0.0/24
    - 224.0.0.0/24
    - ::1/128
    - fc00::/7
    - fe80::/10
    - fd00::/8

  # ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–å‚æ•°
  mobile-settings:
    # ç§»åŠ¨ç½‘ç»œä¸‹æ›´å°çš„MTUå‡å°‘é‡ä¼ 
    mobile-mtu: 1280
    # æ¼«æ¸¸çŠ¶æ€ä¸‹æœ€å°MTU
    roaming-mtu: 1024
    # ä½ç”µé‡æ—¶ç¦ç”¨éƒ¨åˆ†åŠŸèƒ½
    low-battery-optimizations: true

# DNSé…ç½®
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  preload-domain: true
  nameserver-cache-size: 4096
  prefer-h3: true

  # é»˜è®¤DNSæœåŠ¡å™¨ï¼Œç”¨äºè§£æå…¶ä»–DNSæœåŠ¡å™¨çš„åŸŸå
  default-nameserver:
    - 223.6.6.6      # é˜¿é‡ŒDNS
    - 119.29.29.29   # è…¾è®¯DNS
    - 114.114.114.114 # 114DNS
    - 8.8.8.8        # Google DNSå¤‡ç”¨

  # ä¸»è¦DNSæœåŠ¡å™¨ - ä¼˜å…ˆä½¿ç”¨å›½å†…DNSä»¥æé«˜æ€§èƒ½
  nameserver:
    - https://dns.alidns.com/dns-query # é˜¿é‡ŒDOH
    - https://doh.pub/dns-query        # è…¾è®¯DOH
    - 223.6.6.6                        # é˜¿é‡ŒDNSï¼Œç”¨äºä¸æ”¯æŒDOHçš„æƒ…å†µ
    - 119.29.29.29                     # è…¾è®¯DNSï¼Œç”¨äºä¸æ”¯æŒDOHçš„æƒ…å†µ

  # å›½å¤–å›è½DNSæœåŠ¡å™¨ - å½“nameserveræ— æ³•è§£ææˆ–åŒ¹é…åˆ°å›½å¤–åŸŸåæ—¶ä½¿ç”¨
  fallback:
    - https://dns.google/dns-query        # Google DOH
    - https://cloudflare-dns.com/dns-query # Cloudflare DOH
    - https://doh.opendns.com/dns-query    # OpenDNS DOH
    - https://dns.quad9.net/dns-query      # Quad9 DOH

  # ä»£ç†æ¨¡å¼ä¸‹é»˜è®¤ä½¿ç”¨çš„DNS
  proxy-server-nameserver:
    - https://dns.google/dns-query         # Google DOH
    - https://cloudflare-dns.com/dns-query  # Cloudflare DOH

  # åŸŸåè§£æç­–ç•¥ - æ ¹æ®åŸŸåç±»å‹é€‰æ‹©ä¸åŒçš„DNSæœåŠ¡å™¨
  nameserver-policy:
    # å›½å†…ç½‘ç«™ä¼˜å…ˆä½¿ç”¨å›½å†…DNS
    'geosite:cn,category-games-cn': [https://dns.alidns.com/dns-query, https://doh.pub/dns-query]
    # å¾®è½¯ä¸­å›½å’Œè‹¹æœä¸­å›½æœåŠ¡
    'geosite:microsoft-cn,apple-cn': [https://dns.alidns.com/dns-query, https://doh.pub/dns-query]
    # å›½å¤–ç½‘ç«™ä¼˜å…ˆä½¿ç”¨å›½å¤–DNS
    'geosite:geolocation-!cn': [https://dns.cloudflare.com/dns-query, https://dns.google/dns-query]
    # ç§‘å­¦ä¸Šç½‘å’Œå¼€å‘ç½‘ç«™
    'geosite:category-dev,category-science': [https://dns.cloudflare.com/dns-query, https://dns.google/dns-query]
    # å¹¿å‘ŠåŸŸåä½¿ç”¨ç‰¹å®šDNSï¼Œæœ‰åŠ©äºå¹¿å‘Šæ‹¦æˆª
    'geosite:category-ads-all': [https://dns.alidns.com/dns-query]
    # é“¶è¡Œã€æ”¯ä»˜å’Œé‡‘èæœåŠ¡ä¼˜å…ˆä½¿ç”¨å›½å†…DNSç¡®ä¿å®‰å…¨
    'geosite:category-finance': [https://dns.alidns.com/dns-query, 119.29.29.29]
    # å¾®è½¯æœåŠ¡
    'domain:office.com,domain:office365.com,domain:sharepoint.com,domain:microsoft.com': [https://dns.quad9.net/dns-query, https://dns.cloudflare.com/dns-query]
    # ç¤¾äº¤åª’ä½“
    'domain:twitter.com,domain:instagram.com,domain:facebook.com,domain:whatsapp.com': [https://dns.google/dns-query]
    # GitHubå’Œå¼€å‘ç›¸å…³
    'domain:github.com,domain:githubusercontent.com,domain:ghcr.io,domain:githubassets.com': [https://cloudflare-dns.com/dns-query, https://dns.google/dns-query]
    # CDNä¼˜åŒ–
    'domain:cdn.jsdelivr.net': [https://doh.pub/dns-query, https://dns.alidns.com/dns-query]
    'domain:fastly.net': [https://doh.pub/dns-query]
    'domain:akamaiedge.net': [https://dns.alidns.com/dns-query]
    'domain:cloudfront.net': [https://dns.google/dns-query]
    # æµåª’ä½“æœåŠ¡
    'domain:netflix.com,domain:nflxvideo.net,domain:nflxso.net,domain:nflxext.com': [https://dns.google/dns-query, https://cloudflare-dns.com/dns-query]
    'domain:youtube.com,domain:googlevideo.com,domain:ytimg.com': [https://dns.google/dns-query, https://cloudflare-dns.com/dns-query]
    # AIæœåŠ¡
    'domain:openai.com,domain:anthropic.com,domain:claude.ai,domain:suno.ai,domain:perplexity.ai': [https://dns.google/dns-query, https://cloudflare-dns.com/dns-query]

  # åŸŸåTTLè®¾ç½® - å¢åŠ å¸¸ç”¨åŸŸåç¼“å­˜æ—¶é—´ï¼Œå‡å°‘DNSè¯·æ±‚
  domain-ttl:
    'apple.com': 3600
    'microsoft.com': 3600
    'qq.com': 3600
    'taobao.com': 3600
    'baidu.com': 3600
    'jd.com': 3600
    'google.com': 3600
    'youtube.com': 3600
    'netflix.com': 3600
    'github.com': 3600
    'cloudflare.com': 3600
    'openai.com': 3600
    'alipay.com': 1800
    'weixin.qq.com': 1800
    'zhihu.com': 1800
    'bilibili.com': 1800

  # ç‰¹å®šåŸŸåä¸»æœºåœ°å€
  hosts:
    'mtalk.google.com': 108.177.125.188
    'dl.google.com': 142.250.4.132
    'mobile-gtalk.l.google.com': 108.177.125.188

  # Fake-IPè¿‡æ»¤å™¨ - é˜²æ­¢ç‰¹å®šåŸŸåä½¿ç”¨fake-ipæ¨¡å¼ï¼Œé¿å…DNSæ³„éœ²å’Œè¿æ¥é—®é¢˜
  fake-ip-filter:
    # åŸºæœ¬ç½‘ç»œæœåŠ¡
    - '*.lan'
    - '*.local'
    - 'local'
    - '*.localhost'
    - 'localhost'
    - '*.localdomain'
    - '*.example'
    - '*.invalid'
    - '*.test'

    # WebRTC STUNæœåŠ¡å™¨
    - 'stun.*.*.*'
    - 'stun.*.*'
    - '*.stun.*.*'
    - '*.stun.*'
    - '*.stun.*.*.*'

    # Microsoftè¿æ¥æµ‹è¯•
    - '*.msftncsi.com'
    - '*.msftconnecttest.com'
    - 'msftncsi.com'
    - 'msftconnecttest.com'

    # æœ¬åœ°åŸŸå
    - '*.home.arpa'

    # æ—¶é—´æœåŠ¡å™¨
    - 'time.*.com'
    - 'time.*.gov'
    - 'time.*.apple.com'
    - 'time1.*.com'
    - 'time2.*.com'
    - 'time3.*.com'
    - 'time4.*.com'
    - 'time5.*.com'
    - 'time6.*.com'
    - 'time7.*.com'
    - 'ntp.*.com'
    - 'ntp1.*.com'
    - 'ntp2.*.com'
    - 'ntp3.*.com'
    - 'ntp4.*.com'
    - 'ntp5.*.com'
    - 'ntp6.*.com'
    - 'ntp7.*.com'
    - 'time.windows.com'
    - '*.pool.ntp.org'

    # P2P ç§å­å’Œè¿½è¸ªå™¨
    - 'tracker.*.*'
    - '*.tracker.*'
    - 'seed.*.*'
    - '*.seed.*'
    - '*.torrent.*'
    - 'torrent.*.*'

    # æ— çº¿ç½‘ç»œéªŒè¯
    - 'captive.apple.com'
    - 'connectivitycheck.gstatic.com'
    - 'connectivitycheck.android.com'
    - 'detectportal.firefox.com'

    # ä¿¡ç”¨å¡å’Œæ”¯ä»˜ç³»ç»Ÿ
    - '*.alipay.com'
    - '*.pay.*.com'
    - '*.creditcard.*.com'
    - '*.paypal.com'
    - '*.stripe.com'

    # é“¶è¡Œå’Œé‡‘èæœºæ„
    - '*.bank.*.com'
    - '*.banking.*.com'

    # å†…ç½‘ä¿ç•™åœ°å€(é˜²æ­¢DNSæ³„éœ²)
    - '+.internal'
    - '+.my.router'
    - '+.router.asus.com'
    - '+.network'

  # ç§»åŠ¨ç½‘ç»œDNSç­–ç•¥
  mobile-dns-strategy:
    # ç§»åŠ¨ç½‘ç»œä¸‹ä½¿ç”¨éDoH DNSä»¥èŠ‚çœèµ„æº
    prefer-standard-dns: true
    # å»¶é•¿ç¼“å­˜æ—¶é—´
    cache-ttl-multiplier: 2
    # æ¼«æ¸¸ä¸‹æœ€å°åŒ–DNSæŸ¥è¯¢
    minimal-resolving-under-roaming: true
    # ä½ç”µé‡æ—¶é™åˆ¶DNSæ“ä½œ
    reduce-operations-on-low-battery: true

  # ç½‘ç»œæ„ŸçŸ¥DNS
  network-specific-nameserver:
    wifi:
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
    mobile:
      - 223.6.6.6
      - 119.29.29.29
    roaming:
      - 223.6.6.6

# æ€§èƒ½ä¼˜åŒ–é…ç½®
tcp-concurrent: true
tcp-concurrent-max: 512
tcp-concurrent-reuse: true
tcp-fast-open-queue: 512
tcp-no-delay: true
inbound-tfo: true
outbound-tfo: true
inbound-buffer-size: 8192
outbound-buffer-size: 8192
buffer-size: 16384

connection-timeout: 5
dial-timeout: 3
keep-alive-interval: 30
find-process-refresh-interval: 30
disable-logger: true

auto-reconnect: true
reconnect-interval: 3

# ç¼“å­˜é…ç½®
cache:
  enable: true
  size: 8192
  ttl: 3600
  store-fakeip: true
  persistence: true
  memory-ratio: 0.2
  disk-ratio: 0.8
  optimistic-dns: true

  # ç§»åŠ¨ç½‘ç»œä¸‹çš„ç­–ç•¥
  mobile-strategy:
    # å¢åŠ ç¼“å­˜æ—¶é—´ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚
    extended-ttl: true
    # ä¼˜å…ˆç¼“å­˜é¢‘ç¹è®¿é—®çš„èµ„æº
    prioritize-frequent: true
    # æ ¹æ®ç½‘ç»œç±»å‹è‡ªåŠ¨è°ƒæ•´ç¼“å­˜å¤§å°
    adaptive-sizing: true
    # ä½ç”µé‡æ—¶æœ€å¤§åŒ–ä½¿ç”¨ç¼“å­˜
    maximize-on-low-battery: true

rule-cache:
  enable: true
  size: 10240
  ttl: 7200

# å—…æ¢é…ç½®
sniff:
  enable: true
  override-destination: true
  parse-pure-ip: true
  force-domain: true
  skip-domain:
    - '*.alipay.com'
    - '*.pay.*.com'

sniffer:
  enable: true
  sniff:
    http: true
    tls: true
    quic: true
    mtls: true
  force-domain: true
  skip-domain:
    - 'Mijia Cloud'
    - 'dlg.io.mi.com'
    - '*.alipay.com'
    - '*.weixin.qq.com'
    - '*.pay.*.com'
  port-whitelist:
    - 80
    - 443
    - 8000-9000
  sniffing-timeout: 200

# é«˜çº§é…ç½®
profile:
  store-selected: true
  store-fake-ip: true
  tracing: false

wifi-ssid-switch:
  enable: true
  default: "DIRECT"
  ssid:
    "home-wifi": "DEFAULT"
    "work-wifi": "PROXY"
    "pay-wifi": "DIRECT"

battery-saver:
  enable: true
  threshold: 20
  save-mode:
    tcp-concurrent: false
    keep-alive-interval: 60
    sniff: selective

memory:
  optimize-for: speed
  gc-interval: 300
  max-log-size: 1

low-latency-mode:
  enable: true
  handshake-timeout: 3
  socket-buffer-size: 16384

mobile-optimization:
  enable: true
  wake-lock: selective
  reduce-background-traffic: true
  prioritize-interactive-traffic: true
  adaptive-network: true

network-profiles:
  wifi:
    buffer-size: 32768
    tcp-concurrent: true
    keep-alive-interval: 15
    dns-prefetch: aggressive
    max-connections: 256
    idle-timeout: 300
  mobile:
    buffer-size: 8192
    tcp-concurrent: selective
    keep-alive-interval: 45
    dns-prefetch: conservative
    max-connections: 128
    idle-timeout: 180
  roaming:
    buffer-size: 4096
    tcp-concurrent: false
    keep-alive-interval: 90
    dns-prefetch: disabled
    max-connections: 64
    idle-timeout: 60

traffic-control:
  enable: true
  mobile-data-compression: true
  roaming-compression: true
  low-battery-control: true
  priorities:
    foreground: high
    background: low

quic:
  enable: true
  max-idle-timeout: 30
  keep-alive-interval: 15
  0-rtt: true

network-profiles:
  wifi:
    buffer-size: 32768
    tcp-concurrent: true
    keep-alive-interval: 15
    dns-prefetch: aggressive
  mobile:
    buffer-size: 8192
    tcp-concurrent: selective
    keep-alive-interval: 45
    dns-prefetch: conservative
  roaming:
    buffer-size: 4096
    tcp-concurrent: false
    keep-alive-interval: 60
    dns-prefetch: disabled

geodata-mode: true
geodata-loader: standard
global-client-fingerprint: chrome
find-process-mode: always

internet-test-url: http://www.gstatic.com/generate_204
proxy-test-url: http://cp.cloudflare.com/generate_204
test-timeout: 5

experimental:
  ignore-resolve-fail: true
  routing-mark: 255
  clash-for-android:
    append-system-dns: false
    ui-delay-connect: true
    battery-optimizations: true
    smooth-network-switching: true
    optimized-notifications: true
    pause-during-doze: true
  quic-receive-window: 16777216
  bbr: true
  optimistic-connection: true
  compression: true

  mobile-optimizations:
    smart-vpn-pause: true
    app-usage-awareness: true
    network-quality-adaptation: true
    auto-downgrade-on-low-battery: true
    data-saving-compression: true

url-test:
  mobile-test-interval: 600
  roaming-test-interval: 1800
  low-battery-test-interval: 900
  timeout: 3

connection-manager:
  adaptive-parameters: true
  auto-close-idle:
    wifi: 300
    mobile: 180
    roaming: 60
    low-battery: 30
  on-network-change:
    smooth-transition: true
    reassess-connections: true
    prioritize-essential: true
